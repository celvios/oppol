[{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":30,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1375,1404],"text":"\n          The world&apos;s first "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1375,1404],"text":"\n          The world&lsquo;s first "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1375,1404],"text":"\n          The world&#39;s first "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1375,1404],"text":"\n          The world&rsquo;s first "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport Link from \"next/link\";\nimport { ArrowRight, MessageCircle } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\nexport default function Home() {\n  return (\n    <div className=\"min-h-screen bg-background text-white relative overflow-hidden flex flex-col items-center justify-center\">\n      {/* Background Gradients */}\n      <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-primary/10 blur-[150px] rounded-full pointer-events-none\" />\n      <div className=\"absolute bottom-0 right-0 w-[500px] h-[500px] bg-success/5 blur-[120px] rounded-full pointer-events-none\" />\n\n      <motion.div\n        initial={{ opacity: 0, y: 30 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.8 }}\n        className=\"z-10 text-center max-w-2xl px-4\"\n      >\n        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-primary text-xs font-mono mb-8 uppercase tracking-widest\">\n          <span className=\"w-2 h-2 rounded-full bg-primary animate-pulse\" />\n          System Online\n        </div>\n\n        <h1 className=\"text-6xl md:text-7xl font-bold tracking-tighter mb-6 bg-clip-text text-transparent bg-gradient-to-b from-white to-white/40\">\n          OPOLL\n        </h1>\n\n        <p className=\"text-xl text-white/60 mb-10 leading-relaxed font-light\">\n          The world's first <span className=\"text-white font-medium\">WhatsApp-Native</span> Prediction Market.\n          Trade on information directly from your chat, or access the professional terminal for deep analytics.\n        </p>\n\n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n          <Link\n            href=\"/terminal\"\n            className=\"group flex items-center gap-3 bg-white text-black px-8 py-4 rounded-full font-bold transition-all hover:scale-105 active:scale-95 hover:shadow-[0_0_40px_rgba(255,255,255,0.3)]\"\n          >\n            Launch Terminal\n            <ArrowRight className=\"w-5 h-5 transition-transform group-hover:translate-x-1\" />\n          </Link>\n\n          <a\n            href=\"https://wa.me/+1234567890?text=Hi%20OPOLL\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex items-center gap-3 px-8 py-4 rounded-full border border-white/10 hover:bg-white/5 transition-colors text-white/80\"\n          >\n            <MessageCircle className=\"w-5 h-5\" />\n            Trade via WhatsApp\n          </a>\n        </div>\n      </motion.div>\n\n      {/* Footer */}\n      <div className=\"absolute bottom-8 text-white/20 text-xs font-mono uppercase tracking-widest\">\n        Secured by BNB Chain â€¢ Powered by BSC\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\deposit\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":3,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RefreshCcw' is defined but never used.","line":3,"column":75,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":85},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatUnits' is defined but never used.","line":8,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":11,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[633,636],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[633,636],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mintSuccess' is assigned a value but never used.","line":87,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":87,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":107,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":107,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isConfirming' is assigned a value but never used.","line":108,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":36},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'handleDeposit' and 'step'. Either include them or remove the dependency array.","line":119,"column":8,"nodeType":"ArrayExpression","endLine":119,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [handleDeposit, isSuccess, step]","fix":{"range":[4448,4459],"text":"[handleDeposit, isSuccess, step]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":136,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":136,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6330,6333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6330,6333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7199,7202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7199,7202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Copy, Wallet, ArrowRight, CheckCircle, AlertCircle, ChevronDown, RefreshCcw, ArrowDown } from \"lucide-react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { QRCodeSVG } from 'qrcode.react';\r\nimport { useWallet } from \"@/lib/use-wallet\";\r\nimport { useWriteContract, useWaitForTransactionReceipt } from 'wagmi';\r\nimport { parseUnits, formatUnits } from 'viem';\r\nimport { getContracts } from \"@/lib/contracts\";\r\nimport { SkeletonLoader } from \"@/components/ui/SkeletonLoader\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\n// Get contract addresses\r\nconst contracts = getContracts() as any;\r\nconst USDC_ADDRESS = (contracts.mockUSDC || '0x0eAD2Cc3B5eC12B69140410A1F4Dc8611994E6Be') as `0x${string}`;\r\nconst ZAP_ADDRESS = (contracts.zap || '0xEF9C67639CE5fbCE07E0448bcc59587797742B0A68') as `0x${string}`;\r\nconst MARKET_CONTRACT = (contracts.predictionMarket || '0xEcB7195979Cb5781C2D6b4e97cD00b159922A6B3') as `0x${string}`;\r\n\r\n// Mock Tokens\r\nconst TOKENS = [\r\n    { symbol: 'USDC', name: 'USD Coin', icon: 'ðŸ’°', address: USDC_ADDRESS },\r\n    { symbol: 'USDT', name: 'Tether', icon: 'ðŸ’µ', address: '0x337610d27c682E347C9cD60BD4b3b107C9d34dDd' },\r\n    { symbol: 'BNB', name: 'Binance Coin', icon: 'ðŸŸ¡', address: '0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c' }, // WBNB\r\n];\r\n\r\n// ABI for Standard ERC20\r\nconst ERC20_ABI = [\r\n    {\r\n        name: 'approve',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [{ name: 'spender', type: 'address' }, { name: 'amount', type: 'uint256' }],\r\n        outputs: [{ name: '', type: 'bool' }],\r\n    },\r\n    {\r\n        name: 'mint',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [{ name: 'to', type: 'address' }, { name: 'amount', type: 'uint256' }],\r\n        outputs: [],\r\n    },\r\n] as const;\r\n\r\n// Market Contract ABI for deposit\r\nconst MARKET_ABI = [\r\n    {\r\n        name: 'deposit',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [{ name: 'amount', type: 'uint256' }],\r\n        outputs: [],\r\n    },\r\n] as const;\r\n\r\n// Zap Contract Address (Replace with actual deployment)\r\nconst ZAP_ADDRESS = process.env.NEXT_PUBLIC_ZAP_ADDRESS as `0x${string}` || '0x358e8405FCC01Ea93a1422A667f62eec17Fb08cF7';\r\n\r\n// Zap ABI\r\nconst ZAP_ABI = [\r\n    {\r\n        name: 'zapInToken',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [\r\n            { name: 'tokenIn', type: 'address' },\r\n            { name: 'amountIn', type: 'uint256' },\r\n            { name: 'minUSDC', type: 'uint256' }\r\n        ],\r\n        outputs: [],\r\n    },\r\n] as const;\r\n\r\nexport default function DepositPage() {\r\n    const { isConnected, address } = useWallet();\r\n    const [copied, setCopied] = useState(false);\r\n    const [custodialAddress, setCustodialAddress] = useState<string>('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Deposit State\r\n    const [depositAmount, setDepositAmount] = useState('');\r\n    const [selectedToken, setSelectedToken] = useState(TOKENS[0]); // Default USDC\r\n    const [showTokenList, setShowTokenList] = useState(false);\r\n    const [step, setStep] = useState<'input' | 'approving' | 'swapping' | 'depositing' | 'complete'>('input');\r\n\r\n    // Faucet State\r\n    const [isMinting, setIsMinting] = useState(false);\r\n    const [mintSuccess, setMintSuccess] = useState(false);\r\n\r\n    // Swap State (Mock)\r\n    const [estimatedUSDC, setEstimatedUSDC] = useState('0.00');\r\n    useEffect(() => {\r\n        if (!depositAmount) {\r\n            setEstimatedUSDC('0.00');\r\n            return;\r\n        }\r\n        // Mock Rate Calculation\r\n        const amount = parseFloat(depositAmount);\r\n        let rate = 1;\r\n        if (selectedToken.symbol === 'USDT') rate = 0.999;\r\n        if (selectedToken.symbol === 'BNB') rate = 620.50;\r\n\r\n        setEstimatedUSDC((amount * rate).toFixed(2));\r\n    }, [depositAmount, selectedToken]);\r\n\r\n\r\n    // Contract Wrtie\r\n    const { writeContract, data: hash, isPending, error } = useWriteContract();\r\n    const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({ hash });\r\n\r\n    // Watch for success\r\n    useEffect(() => {\r\n        if (isSuccess) {\r\n            if (step === 'approving') {\r\n                handleDeposit();\r\n            } else if (step === 'depositing' || step === 'swapping') {\r\n                setStep('complete');\r\n            }\r\n        }\r\n    }, [isSuccess]);\r\n\r\n    // Fetch custodial wallet\r\n    useEffect(() => {\r\n        async function fetchWallet() {\r\n            try {\r\n                const sessionToken = localStorage.getItem('session_token');\r\n                if (!sessionToken) {\r\n                    setCustodialAddress('0x71C7656EC7ab88b098defB751B7401B5f6d8976F');\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n                const payload = JSON.parse(atob(sessionToken.split('.')[1]));\r\n                const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000'}/api/wallet/${payload.userId}`);\r\n                const data = await response.json();\r\n                if (data.success && data.wallet) setCustodialAddress(data.wallet.public_address);\r\n                else setCustodialAddress('0x71C7656EC7ab88b098defB751B7401B5f6d8976F');\r\n            } catch (e) {\r\n                setCustodialAddress('0x71C7656EC7ab88b098defB751B7401B5f6d8976F');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n        fetchWallet();\r\n    }, []);\r\n\r\n    const copyToClipboard = (text: string) => {\r\n        navigator.clipboard.writeText(text);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    const handleApprove = async () => {\r\n        if (!depositAmount || parseFloat(depositAmount) <= 0) return;\r\n        setStep('approving');\r\n\r\n        const isZap = selectedToken.symbol !== 'USDC';\r\n        const spender = isZap ? ZAP_ADDRESS : MARKET_CONTRACT;\r\n        // For USDT, we'd use the USDT contract address. For demo, we use USDC_ADDRESS as placeholder if symbol is not USDC, \r\n        // but in production `selectedToken.address` should be used.\r\n        // Assuming TOKENS list has addresses (adding them now if not)\r\n        const tokenAddress = (selectedToken as any).address || USDC_ADDRESS;\r\n\r\n        try {\r\n            writeContract({\r\n                address: tokenAddress,\r\n                abi: ERC20_ABI,\r\n                functionName: 'approve',\r\n                args: [spender, parseUnits(depositAmount, 6)],\r\n            });\r\n        } catch (err) {\r\n            console.error(err);\r\n            setStep('input');\r\n        }\r\n    };\r\n\r\n    const handleDeposit = async () => {\r\n        const isZap = selectedToken.symbol !== 'USDC';\r\n        setStep(isZap ? 'swapping' : 'depositing'); // For Zap, we say 'swapping' (includes deposit)\r\n\r\n        try {\r\n            if (isZap) {\r\n                // Zap Flow\r\n                // minUSDC = estimatedUSDC * 0.98 (2% slippage)\r\n                const minUSDC = parseUnits((parseFloat(estimatedUSDC) * 0.98).toString(), 6);\r\n                const tokenAddress = (selectedToken as any).address || USDC_ADDRESS;\r\n\r\n                writeContract({\r\n                    address: ZAP_ADDRESS,\r\n                    abi: ZAP_ABI,\r\n                    functionName: 'zapInToken',\r\n                    args: [tokenAddress, parseUnits(depositAmount, 6), minUSDC],\r\n                });\r\n            } else {\r\n                // Standard Flow\r\n                writeContract({\r\n                    address: MARKET_CONTRACT,\r\n                    abi: MARKET_ABI,\r\n                    functionName: 'deposit',\r\n                    args: [parseUnits(depositAmount, 6)],\r\n                });\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n            setStep('input');\r\n        }\r\n    };\r\n\r\n    const handleMintUSDC = async () => {\r\n        if (!address) return;\r\n        setIsMinting(true);\r\n        setMintSuccess(false);\r\n        try {\r\n            writeContract({\r\n                address: USDC_ADDRESS,\r\n                abi: ERC20_ABI,\r\n                functionName: 'mint',\r\n                args: [address, parseUnits('10000', 6)],\r\n            });\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setIsMinting(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <SkeletonLoader />;\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto space-y-8 pt-8\">\r\n            <div className=\"text-center\">\r\n                <h1 className=\"text-3xl font-mono font-bold text-white mb-2\">DEPOSIT FUNDS</h1>\r\n                <p className=\"text-white/50\">Add funds to start trading. Auto-converted to USDC.</p>\r\n            </div>\r\n\r\n            {/* WalletConnect User */}\r\n            {isConnected ? (\r\n                <div className=\"bg-surface/50 backdrop-blur-md border border-white/10 rounded-2xl p-6\">\r\n                    <div className=\"flex items-center gap-3 mb-6\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center\">\r\n                            <Wallet className=\"w-5 h-5 text-primary\" />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-lg font-bold text-white\">Direct Deposit</h2>\r\n                            <p className=\"text-sm text-white/50\">{address?.slice(0, 8)}...{address?.slice(-6)}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Faucet */}\r\n                    <div className=\"mb-6 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl flex items-center justify-between\">\r\n                        <div>\r\n                            <h3 className=\"text-amber-400 font-bold text-sm\">ðŸš° Testnet Faucet</h3>\r\n                            <p className=\"text-white/50 text-xs\">Mint 10,000 test USDC</p>\r\n                        </div>\r\n                        <button onClick={handleMintUSDC} disabled={isMinting} className=\"px-4 py-2 bg-amber-500 text-black font-bold rounded-lg text-sm hover:bg-amber-600 disabled:opacity-50\">\r\n                            {isMinting ? 'Minting...' : 'Mint USDC'}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {step === 'input' ? (\r\n                        <div className=\"space-y-4\">\r\n                            {/* Token Select & Input */}\r\n                            <div className=\"bg-black/40 border border-white/10 rounded-xl p-4\">\r\n                                <div className=\"flex justify-between mb-2\">\r\n                                    <label className=\"text-sm font-medium text-white/60\">You pay</label>\r\n                                    <span className=\"text-xs text-secondary hover:text-white cursor-pointer\">Balance: --</span>\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-4\">\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={depositAmount}\r\n                                        onChange={(e) => setDepositAmount(e.target.value)}\r\n                                        placeholder=\"0.00\"\r\n                                        className=\"w-full bg-transparent text-2xl font-mono text-white placeholder:text-white/20 focus:outline-none\"\r\n                                    />\r\n\r\n                                    <div className=\"relative\">\r\n                                        <button\r\n                                            onClick={() => setShowTokenList(!showTokenList)}\r\n                                            className=\"flex items-center gap-2 bg-white/10 hover:bg-white/20 px-3 py-2 rounded-lg transition-colors min-w-[120px]\"\r\n                                        >\r\n                                            <span className=\"text-lg\">{selectedToken.icon}</span>\r\n                                            <span className=\"font-bold text-white\">{selectedToken.symbol}</span>\r\n                                            <ChevronDown size={16} className=\"text-white/50 ml-auto\" />\r\n                                        </button>\r\n\r\n                                        {showTokenList && (\r\n                                            <div className=\"absolute right-0 top-full mt-2 w-full bg-[#1A1A1C] border border-white/10 rounded-xl overflow-hidden shadow-xl z-20\">\r\n                                                {TOKENS.map(token => (\r\n                                                    <button\r\n                                                        key={token.symbol}\r\n                                                        onClick={() => { setSelectedToken(token); setShowTokenList(false); }}\r\n                                                        className=\"w-full flex items-center gap-3 p-3 hover:bg-white/5 transition-colors text-left\"\r\n                                                    >\r\n                                                        <span className=\"text-lg\">{token.icon}</span>\r\n                                                        <span className=\"text-white font-medium\">{token.symbol}</span>\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-center -my-2 relative z-10\">\r\n                                <div className=\"bg-surface p-2 rounded-full border border-white/10\">\r\n                                    <ArrowDown size={16} className=\"text-white/50\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-black/40 border border-white/10 rounded-xl p-4\">\r\n                                <div className=\"flex justify-between mb-2\">\r\n                                    <label className=\"text-sm font-medium text-white/60\">You receive (Estimated)</label>\r\n                                </div>\r\n                                <div className=\"flex gap-4 items-center\">\r\n                                    <div className=\"w-full bg-transparent text-2xl font-mono text-white/90\">\r\n                                        {estimatedUSDC}\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2 px-3 py-2\">\r\n                                        <span className=\"text-lg\">ðŸ’°</span>\r\n                                        <span className=\"font-bold text-white\">USDC</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleApprove}\r\n                                disabled={!depositAmount || parseFloat(depositAmount) <= 0}\r\n                                className=\"w-full py-4 bg-primary hover:bg-primary/80 disabled:bg-white/10 disabled:text-white/30 text-black font-bold rounded-xl transition-all flex items-center justify-center gap-2\"\r\n                            >\r\n                                {selectedToken.symbol === 'USDC' ? 'Approve & Deposit' : `Swap & Deposit`}\r\n                                <ArrowRight className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center py-8\">\r\n                            {isPending || step === 'swapping' ? (\r\n                                <div className=\"w-16 h-16 relative mx-auto mb-6\">\r\n                                    <div className=\"w-16 h-16 border-4 border-white/10 rounded-full\" />\r\n                                    <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin absolute top-0 left-0\" />\r\n                                </div>\r\n                            ) : null}\r\n\r\n                            <h3 className=\"text-xl font-bold text-white mb-2\">\r\n                                {step === 'approving' && 'Step 1: Approving Token...'}\r\n                                {step === 'swapping' && 'Step 2: Swapping to USDC...'}\r\n                                {step === 'depositing' && 'Step 3: Depositing Funds...'}\r\n                                {step === 'complete' && 'Deposit Successful!'}\r\n                            </h3>\r\n\r\n                            <p className=\"text-white/50 mb-6\">\r\n                                {step === 'complete'\r\n                                    ? `$${estimatedUSDC} USDC has been added to your balance.`\r\n                                    : 'Please confirm transaction in your wallet'}\r\n                            </p>\r\n\r\n                            {step === 'complete' && (\r\n                                <button\r\n                                    onClick={() => { setStep('input'); setDepositAmount(''); }}\r\n                                    className=\"px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl transition-all\"\r\n                                >\r\n                                    Make Another Deposit\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                /* Custodial View */\r\n                <div className=\"bg-surface/50 backdrop-blur-md border border-white/10 rounded-2xl p-6 text-center\">\r\n                    <h2 className=\"text-lg font-bold text-white mb-4\">Scan to Deposit</h2>\r\n                    <div className=\"bg-white p-6 rounded-xl inline-block mb-6\">\r\n                        <QRCodeSVG value={custodialAddress} size={180} />\r\n                    </div>\r\n                    <div className=\"bg-black/40 border border-white/10 p-4 rounded-xl flex items-center justify-between mb-6 max-w-sm mx-auto\">\r\n                        <code className=\"text-primary font-mono text-sm break-all\">{custodialAddress}</code>\r\n                        <button onClick={() => copyToClipboard(custodialAddress)}>\r\n                            {copied ? <CheckCircle size={18} className=\"text-success\" /> : <Copy size={18} className=\"text-white/60\" />}\r\n                        </button>\r\n                    </div>\r\n                    <p className=\"text-white/40 text-sm\">\r\n                        Send any base token (BNB, USDT, USDC) on <strong className=\"text-white\">BNB Chain</strong>.\r\n                        <br />It will be automatically converted to USDC.\r\n                    </p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\portfolio\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowUpRight' is defined but never used.","line":3,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowDownRight' is defined but never used.","line":3,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":60},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1691,1694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1691,1694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { PieChart, TrendingUp, ArrowUpRight, ArrowDownRight, Wallet } from \"lucide-react\";\r\nimport { useEffect, useState } from 'react';\r\nimport { web3Service } from '@/lib/web3';\r\nimport { useWallet } from \"@/lib/use-wallet\";\r\nimport { useWeb3Modal } from '@web3modal/wagmi/react';\r\nimport { SkeletonLoader } from \"@/components/ui/SkeletonLoader\";\r\n\r\ninterface Position {\r\n    market: string;\r\n    marketId: number;\r\n    side: 'YES' | 'NO';\r\n    shares: number;\r\n    avgPrice: string;\r\n    currentPrice: number;\r\n    currentValue: string;\r\n    pnl: string;\r\n    pnlRaw: number;\r\n}\r\n\r\nexport default function PortfolioPage() {\r\n    const [balance, setBalance] = useState<string>('0');\r\n    const [positions, setPositions] = useState<Position[]>([]);\r\n    const [totalPnL, setTotalPnL] = useState<number>(0);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Wallet connection state\r\n    const { isConnected, address } = useWallet();\r\n    const { open } = useWeb3Modal();\r\n\r\n    useEffect(() => {\r\n        // Only fetch data if wallet is connected\r\n        if (!isConnected || !address) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        async function fetchData() {\r\n            try {\r\n                // Fetch user DEPOSITED balance (Polymarket-style)\r\n                const userBalance = await web3Service.getDepositedBalance(address!);\r\n                setBalance(userBalance);\r\n\r\n                // Fetch all markets and user positions\r\n                const markets = await web3Service.getMarkets();\r\n\r\n                // Fetch portfolio stats (real avg entry price) from backend\r\n                let portfolioStats: Record<string, any> = {};\r\n                try {\r\n                    const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n                    if (apiUrl) {\r\n                        const statsRes = await fetch(`${apiUrl}/api/portfolio/${address}/stats`);\r\n                        const statsData = await statsRes.json();\r\n                        if (statsData.success) {\r\n                            portfolioStats = statsData.stats;\r\n                        }\r\n                    }\r\n                } catch (err) {\r\n                    console.warn('Failed to fetch portfolio stats:', err);\r\n                }\r\n\r\n                const userPositions: Position[] = [];\r\n                let aggregatePnL = 0;\r\n\r\n                for (const market of markets) {\r\n                    const position = await web3Service.getUserPosition(market.id, address!);\r\n                    if (!position) continue;\r\n\r\n                    const yesShares = parseFloat(position.yesShares) || 0;\r\n                    const noShares = parseFloat(position.noShares) || 0;\r\n\r\n                    // Process YES position\r\n                    if (yesShares > 0) {\r\n                        const currentPrice = market.yesOdds / 100;\r\n\r\n                        // Get real avg price or fallback to 0.50\r\n                        const statsKey = `${market.id}-YES`;\r\n                        const avgPrice = portfolioStats[statsKey]?.avgPrice || 0.50;\r\n\r\n                        const currentValue = yesShares * currentPrice;\r\n                        const costBasis = yesShares * avgPrice;\r\n                        const pnl = currentValue - costBasis;\r\n                        aggregatePnL += pnl;\r\n\r\n                        userPositions.push({\r\n                            market: market.question,\r\n                            marketId: market.id,\r\n                            side: 'YES',\r\n                            shares: Math.floor(yesShares),\r\n                            avgPrice: avgPrice.toFixed(2),\r\n                            currentPrice,\r\n                            currentValue: currentValue.toFixed(2),\r\n                            pnl: pnl >= 0 ? `+$${pnl.toFixed(2)}` : `-$${Math.abs(pnl).toFixed(2)}`,\r\n                            pnlRaw: pnl,\r\n                        });\r\n                    }\r\n\r\n                    // Process NO position\r\n                    if (noShares > 0) {\r\n                        const currentPrice = (100 - market.yesOdds) / 100;\r\n\r\n                        // Get real avg price or fallback to 0.50\r\n                        const statsKey = `${market.id}-NO`;\r\n                        const avgPrice = portfolioStats[statsKey]?.avgPrice || 0.50;\r\n\r\n                        const currentValue = noShares * currentPrice;\r\n                        const costBasis = noShares * avgPrice;\r\n                        const pnl = currentValue - costBasis;\r\n                        aggregatePnL += pnl;\r\n\r\n                        userPositions.push({\r\n                            market: market.question,\r\n                            marketId: market.id,\r\n                            side: 'NO',\r\n                            shares: Math.floor(noShares),\r\n                            avgPrice: avgPrice.toFixed(2),\r\n                            currentPrice,\r\n                            currentValue: currentValue.toFixed(2),\r\n                            pnl: pnl >= 0 ? `+$${pnl.toFixed(2)}` : `-$${Math.abs(pnl).toFixed(2)}`,\r\n                            pnlRaw: pnl,\r\n                        });\r\n                    }\r\n                }\r\n\r\n                setPositions(userPositions);\r\n                setTotalPnL(aggregatePnL);\r\n            } catch (error) {\r\n                console.error('Error fetching portfolio:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        // Initial fetch\r\n        fetchData();\r\n\r\n        // Auto-refresh every 10 seconds\r\n        const interval = setInterval(fetchData, 10000);\r\n\r\n        // Cleanup on unmount\r\n        return () => clearInterval(interval);\r\n    }, [isConnected, address]);\r\n\r\n    // WALLET CONNECTION GATE - Show connect prompt if not connected\r\n    if (!isConnected) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[80vh]\">\r\n                <div className=\"text-center max-w-md\">\r\n                    <div className=\"w-20 h-20 mx-auto mb-6 rounded-full bg-primary/10 border border-primary/30 flex items-center justify-center\">\r\n                        <Wallet className=\"w-10 h-10 text-primary\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-bold text-white mb-3\">Connect Your Wallet</h2>\r\n                    <p className=\"text-white/50 mb-8\">\r\n                        Connect your wallet to view your portfolio, positions, and trading history.\r\n                    </p>\r\n                    <button\r\n                        onClick={() => open()}\r\n                        className=\"px-8 py-4 bg-primary text-black font-bold rounded-xl hover:bg-primary/90 transition-all hover:scale-105 active:scale-95 shadow-[0_0_30px_rgba(0,224,255,0.3)]\"\r\n                    >\r\n                        Connect Wallet\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (loading) {\r\n        return <SkeletonLoader />;\r\n    }\r\n\r\n    const pnlDisplay = totalPnL >= 0\r\n        ? `+$${totalPnL.toFixed(2)}`\r\n        : `-$${Math.abs(totalPnL).toFixed(2)}`;\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <h1 className=\"text-3xl font-mono font-bold text-white mb-6\">PORTFOLIO</h1>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"bg-surface/40 border border-white/10 p-6 rounded-2xl relative overflow-hidden\">\r\n                    <div className=\"absolute top-0 right-0 p-4 opacity-10\"><PieChart size={100} /></div>\r\n                    <p className=\"text-white/40 text-sm uppercase tracking-widest mb-2\">Total Balance</p>\r\n                    <p className=\"text-4xl font-mono text-white\">${parseFloat(balance).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>\r\n                    <div className=\"mt-4 flex items-center gap-2 text-white/40 text-sm\">\r\n                        <TrendingUp size={16} />\r\n                        <span>USDC Balance</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-surface/40 border border-white/10 p-6 rounded-2xl\">\r\n                    <p className=\"text-white/40 text-sm uppercase tracking-widest mb-2\">Active Positions</p>\r\n                    <p className=\"text-4xl font-mono text-white\">{positions.length}</p>\r\n                    <p className=\"text-white/30 text-xs mt-2\">{positions.length > 0 ? `Across ${positions.length} Position${positions.length > 1 ? 's' : ''}` : 'No active positions'}</p>\r\n                </div>\r\n\r\n                <div className=\"bg-surface/40 border border-white/10 p-6 rounded-2xl\">\r\n                    <p className=\"text-white/40 text-sm uppercase tracking-widest mb-2\">Unrealized PnL</p>\r\n                    <p className={`text-4xl font-mono ${totalPnL >= 0 ? 'text-success' : 'text-danger'}`}>\r\n                        {pnlDisplay}\r\n                    </p>\r\n                    <p className=\"text-white/30 text-xs mt-2\">Based on 50% avg entry</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Positions Table */}\r\n            <div className=\"bg-surface/30 border border-white/5 rounded-2xl overflow-hidden backdrop-blur-sm\">\r\n                <div className=\"p-6 border-b border-white/5\">\r\n                    <h2 className=\"text-lg font-bold\">Active Positions</h2>\r\n                </div>\r\n                <table className=\"w-full text-left\">\r\n                    <thead>\r\n                        <tr className=\"bg-white/5 text-white/40 text-xs uppercase tracking-wider\">\r\n                            <th className=\"p-4 font-medium\">Market</th>\r\n                            <th className=\"p-4 font-medium\">Side</th>\r\n                            <th className=\"p-4 font-medium\">Shares</th>\r\n                            <th className=\"p-4 font-medium\">Avg Price</th>\r\n                            <th className=\"p-4 font-medium\">Current Price</th>\r\n                            <th className=\"p-4 font-medium\">Value</th>\r\n                            <th className=\"p-4 font-medium\">PnL</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-white/5\">\r\n                        {positions.length === 0 ? (\r\n                            <tr>\r\n                                <td colSpan={7} className=\"p-8 text-center text-white/40\">\r\n                                    No active positions. Place a bet to get started!\r\n                                </td>\r\n                            </tr>\r\n                        ) : (\r\n                            positions.map((pos, i) => (\r\n                                <tr key={i} className=\"hover:bg-white/5 transition-colors\">\r\n                                    <td className=\"p-4 font-medium text-white max-w-xs truncate\">{pos.market}</td>\r\n                                    <td className=\"p-4\">\r\n                                        <span className={pos.side === \"YES\" ? \"text-success bg-success/10 px-2 py-1 rounded text-xs font-bold\" : \"text-danger bg-danger/10 px-2 py-1 rounded text-xs font-bold\"}>\r\n                                            {pos.side}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"p-4 font-mono text-white/80\">{pos.shares}</td>\r\n                                    <td className=\"p-4 font-mono text-white/60\">${pos.avgPrice}</td>\r\n                                    <td className=\"p-4 font-mono text-white/80\">${pos.currentPrice.toFixed(2)}</td>\r\n                                    <td className=\"p-4 font-mono text-white\">${pos.currentValue}</td>\r\n                                    <td className={`p-4 font-mono font-bold ${pos.pnlRaw >= 0 ? 'text-success' : 'text-danger'}`}>\r\n                                        {pos.pnl}\r\n                                    </td>\r\n                                </tr>\r\n                            ))\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Disclaimer */}\r\n            <div className=\"text-center text-white/30 text-xs\">\r\n                Note: Average entry price is estimated at $0.50. For accurate PnL tracking, trade history logging will be implemented.\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\withdraw\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1501,1504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1501,1504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\withdraw\\page.tsx:63:13\n  61 |     useEffect(() => {\n  62 |         if (isSuccess && hash) {\n> 63 |             setTxHash(hash);\n     |             ^^^^^^^^^ Avoid calling setState() directly within an effect\n  64 |             setStep('complete');\n  65 |             refetchBalance(); // Update balance immediately\n  66 |         }","line":63,"column":13,"nodeType":null,"endLine":63,"endColumn":22},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\toluk\\Documents\\predict\\client\\app\\terminal\\withdraw\\page.tsx:72:13\n  70 |         if (writeError) {\n  71 |             console.error('Withdraw error:', writeError);\n> 72 |             setErrorMessage(writeError.message || 'Withdrawal failed');\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  73 |             setStep('error');\n  74 |         }\n  75 |     }, [writeError]);","line":72,"column":13,"nodeType":null,"endLine":72,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3481,3484],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3481,3484],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { ArrowDownRight, Wallet, CheckCircle, AlertCircle, Loader2 } from \"lucide-react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useWallet } from \"@/lib/use-wallet\";\r\nimport { motion } from 'framer-motion';\r\nimport { SkeletonLoader } from \"@/components/ui/SkeletonLoader\";\r\nimport { SlideToConfirm } from \"@/components/ui/SlideToConfirm\";\r\nimport { useWeb3Modal } from '@web3modal/wagmi/react';\r\nimport { useReadContract, useWriteContract, useWaitForTransactionReceipt } from 'wagmi';\r\nimport { formatUnits, parseUnits } from 'viem';\r\nimport { getContracts } from '@/lib/contracts';\r\n\r\nconst MARKET_ABI = [\r\n    {\r\n        name: 'userBalances',\r\n        type: 'function',\r\n        stateMutability: 'view',\r\n        inputs: [{ name: '', type: 'address' }],\r\n        outputs: [{ name: '', type: 'uint256' }],\r\n    },\r\n    {\r\n        name: 'withdraw',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [{ name: 'amount', type: 'uint256' }],\r\n        outputs: [],\r\n    },\r\n] as const;\r\n\r\nexport default function WithdrawPage() {\r\n    const { isConnected, address } = useWallet();\r\n    const { open } = useWeb3Modal();\r\n    const [withdrawAmount, setWithdrawAmount] = useState('');\r\n    const [step, setStep] = useState<'input' | 'confirm' | 'processing' | 'complete' | 'error'>('input');\r\n    const [txHash, setTxHash] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const contracts = getContracts() as any;\r\n    const MARKET_CONTRACT = (contracts.predictionMarket || '0x5F9C05bE2Af2adb520825950323774eFF308E353') as `0x${string}`;\r\n\r\n    // 1. Read Balance from Contract\r\n    const { data: balanceData, refetch: refetchBalance, isLoading: isBalanceLoading } = useReadContract({\r\n        address: MARKET_CONTRACT,\r\n        abi: MARKET_ABI,\r\n        functionName: 'userBalances',\r\n        args: address ? [address] : undefined,\r\n        query: {\r\n            enabled: !!address,\r\n            refetchInterval: 5000 // Verified real-time updates\r\n        }\r\n    });\r\n\r\n    const depositedBalance = balanceData ? formatUnits(balanceData, 6) : '0.00';\r\n    const formattedBalance = parseFloat(depositedBalance).toFixed(2);\r\n\r\n    // 2. Write Contract (Withdraw)\r\n    const { writeContract, data: hash, error: writeError } = useWriteContract();\r\n    const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({ hash });\r\n\r\n    useEffect(() => {\r\n        if (isSuccess && hash) {\r\n            setTxHash(hash);\r\n            setStep('complete');\r\n            refetchBalance(); // Update balance immediately\r\n        }\r\n    }, [isSuccess, hash, refetchBalance]);\r\n\r\n    useEffect(() => {\r\n        if (writeError) {\r\n            console.error('Withdraw error:', writeError);\r\n            setErrorMessage(writeError.message || 'Withdrawal failed');\r\n            setStep('error');\r\n        }\r\n    }, [writeError]);\r\n\r\n    // Handle withdrawal request\r\n    async function handleWithdraw() {\r\n        if (!withdrawAmount || parseFloat(withdrawAmount) <= 0 || !address) return;\r\n\r\n        setStep('processing');\r\n        setErrorMessage('');\r\n\r\n        try {\r\n            const amountInUnits = parseUnits(withdrawAmount, 6); // USDC uses 6 decimals\r\n\r\n            writeContract({\r\n                address: MARKET_CONTRACT,\r\n                abi: MARKET_ABI,\r\n                functionName: 'withdraw',\r\n                args: [amountInUnits],\r\n            });\r\n        } catch (error: any) {\r\n            console.error('Withdrawal trigger error:', error);\r\n            setErrorMessage(error.message || 'Failed to initiate withdrawal');\r\n            setStep('error');\r\n        }\r\n    }\r\n\r\n    // Determine loading state\r\n    if (!isConnected) {\r\n        // Not connected view\r\n        return (\r\n            <div className=\"max-w-2xl mx-auto pt-8\">\r\n                <div className=\"text-center mb-8\">\r\n                    <h1 className=\"text-3xl font-mono font-bold text-white mb-2\">WITHDRAW FUNDS</h1>\r\n                    <p className=\"text-white/50\">Connect your wallet to withdraw your funds</p>\r\n                </div>\r\n                <div className=\"bg-surface/50 backdrop-blur-md border border-white/10 rounded-2xl p-8 text-center\">\r\n                    <div className=\"w-16 h-16 mx-auto mb-6 rounded-full bg-primary/20 flex items-center justify-center\">\r\n                        <Wallet className=\"w-8 h-8 text-primary\" />\r\n                    </div>\r\n                    <h2 className=\"text-xl font-bold text-white mb-3\">Connect Wallet</h2>\r\n                    <p className=\"text-white/50 mb-6\">Connect your wallet to view your balance and withdraw funds.</p>\r\n                    <button\r\n                        onClick={() => open()}\r\n                        className=\"px-8 py-4 bg-primary text-black font-bold rounded-xl hover:bg-primary/90 transition-all\"\r\n                    >\r\n                        Connect Wallet\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (isBalanceLoading && !balanceData) {\r\n        return <SkeletonLoader />;\r\n    }\r\n\r\n    const availableBalance = parseFloat(depositedBalance);\r\n    const canWithdraw = availableBalance > 0;\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto space-y-8 pt-8\">\r\n            <div className=\"text-center\">\r\n                <h1 className=\"text-3xl font-mono font-bold text-white mb-2\">WITHDRAW FUNDS</h1>\r\n                <p className=\"text-white/50\">Withdraw your deposited balance back to your wallet</p>\r\n            </div>\r\n\r\n            {/* Balance Card */}\r\n            <div className=\"bg-surface/50 backdrop-blur-md border border-white/10 rounded-2xl p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center\">\r\n                            <Wallet className=\"w-5 h-5 text-primary\" />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-lg font-bold text-white\">Your Wallet</h2>\r\n                            <p className=\"text-sm text-white/50\">{address?.slice(0, 8)}...{address?.slice(-6)}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <p className=\"text-sm text-white/50\">Available to Withdraw</p>\r\n                        <p className=\"text-2xl font-mono font-bold text-primary\">${formattedBalance}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* No balance message */}\r\n                {!canWithdraw && step === 'input' && (\r\n                    <div className=\"bg-white/5 border border-white/10 rounded-xl p-4 text-center\">\r\n                        <p className=\"text-white/60\">No funds available to withdraw.</p>\r\n                        <p className=\"text-white/40 text-sm mt-1\">Deposit funds first to start trading.</p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Input Step */}\r\n                {canWithdraw && step === 'input' && (\r\n                    <div className=\"space-y-4\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-white/60 mb-2\">Amount to Withdraw</label>\r\n                            <div className=\"relative\">\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={withdrawAmount}\r\n                                    onChange={(e) => setWithdrawAmount(e.target.value)}\r\n                                    placeholder=\"0.00\"\r\n                                    max={availableBalance}\r\n                                    className=\"w-full px-4 py-4 bg-black/40 border border-white/10 rounded-xl text-white text-xl font-mono placeholder:text-white/20 focus:outline-none focus:border-primary/50\"\r\n                                />\r\n                                <button\r\n                                    onClick={() => setWithdrawAmount(depositedBalance)}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-primary text-sm hover:underline\"\r\n                                >\r\n                                    MAX\r\n                                </button>\r\n                            </div>\r\n                            {parseFloat(withdrawAmount) > availableBalance && (\r\n                                <p className=\"text-red-400 text-xs mt-1\">Amount exceeds available balance</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"bg-black/20 rounded-xl p-4 space-y-2\">\r\n                            <div className=\"flex justify-between text-sm\">\r\n                                <span className=\"text-white/50\">Withdraw to</span>\r\n                                <span className=\"text-white font-mono text-xs\">{address?.slice(0, 10)}...{address?.slice(-8)}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between text-sm\">\r\n                                <span className=\"text-white/50\">Network</span>\r\n                                <span className=\"text-white\">BNB Smart Chain</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={() => setStep('confirm')}\r\n                            disabled={!withdrawAmount || parseFloat(withdrawAmount) <= 0 || parseFloat(withdrawAmount) > availableBalance}\r\n                            className=\"w-full py-4 bg-primary hover:bg-primary/80 disabled:bg-white/10 disabled:text-white/30 text-black font-bold rounded-xl transition-all duration-200 flex items-center justify-center gap-2\"\r\n                        >\r\n                            Review Withdrawal\r\n                            <ArrowDownRight className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Confirm Step */}\r\n                {step === 'confirm' && (\r\n                    <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} className=\"space-y-4\">\r\n                        <div className=\"bg-black/40 rounded-xl p-4 space-y-3\">\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-white/50\">Amount</span>\r\n                                <span className=\"text-white font-mono text-lg\">${withdrawAmount} USDC</span>\r\n                            </div>\r\n                            <div className=\"border-t border-white/10 pt-3 flex justify-between\">\r\n                                <span className=\"text-white/50\">To Wallet</span>\r\n                                <span className=\"text-primary font-mono text-sm\">{address?.slice(0, 10)}...{address?.slice(-6)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <SlideToConfirm\r\n                            onConfirm={handleWithdraw}\r\n                            isLoading={isConfirming}\r\n                            disabled={isConfirming}\r\n                            text=\"SLIDE TO WITHDRAW\"\r\n                            side=\"NO\"\r\n                        />\r\n\r\n                        <button\r\n                            onClick={() => setStep('input')}\r\n                            className=\"w-full py-3 border border-white/20 text-white rounded-xl hover:bg-white/5 transition-all\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Processing Step */}\r\n                {(step === 'processing' || isConfirming) && (\r\n                    <div className=\"text-center py-8\">\r\n                        <Loader2 className=\"w-12 h-12 text-primary mx-auto mb-4 animate-spin\" />\r\n                        <p className=\"text-white\">{isConfirming ? 'Confirming transaction...' : 'Please sign in wallet...'}</p>\r\n                        <p className=\"text-white/50 text-sm mt-2\">Do not close this window</p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Complete Step */}\r\n                {step === 'complete' && (\r\n                    <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} className=\"text-center py-8\">\r\n                        <CheckCircle className=\"w-16 h-16 text-success mx-auto mb-4\" />\r\n                        <h3 className=\"text-xl font-bold text-white mb-2\">Withdrawal Successful!</h3>\r\n                        <p className=\"text-white/50 mb-4\">${withdrawAmount} USDC has been sent to your wallet</p>\r\n                        {txHash && (\r\n                            <a\r\n                                href={`https://testnet.bscscan.com/tx/${txHash}`}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"text-primary text-sm hover:underline\"\r\n                            >\r\n                                View on BscScan â†’\r\n                            </a>\r\n                        )}\r\n                        <button\r\n                            onClick={() => {\r\n                                setStep('input');\r\n                                setWithdrawAmount('');\r\n                                refetchBalance();\r\n                            }}\r\n                            className=\"mt-6 px-6 py-3 bg-white/10 text-white rounded-xl hover:bg-white/20 transition-all\"\r\n                        >\r\n                            Done\r\n                        </button>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Error Step */}\r\n                {step === 'error' && (\r\n                    <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} className=\"text-center py-8\">\r\n                        <AlertCircle className=\"w-16 h-16 text-danger mx-auto mb-4\" />\r\n                        <h3 className=\"text-xl font-bold text-white mb-2\">Withdrawal Failed</h3>\r\n                        <p className=\"text-white/50 mb-4 max-w-xs mx-auto text-sm\">{errorMessage}</p>\r\n                        <button\r\n                            onClick={() => setStep('input')}\r\n                            className=\"px-6 py-3 bg-white/10 text-white rounded-xl hover:bg-white/20 transition-all\"\r\n                        >\r\n                            Try Again\r\n                        </button>\r\n                    </motion.div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Info Box */}\r\n            <div className=\"bg-white/5 border border-white/10 p-6 rounded-xl\">\r\n                <h3 className=\"text-white font-bold mb-3\">ðŸ’¡ About Withdrawals</h3>\r\n                <ul className=\"list-disc list-inside text-sm text-white/60 space-y-2\">\r\n                    <li>Withdrawals are processed directly by the smart contract</li>\r\n                    <li>Funds arrive in your wallet immediately after confirmation</li>\r\n                    <li>You must sign the transaction to authorize the withdrawal</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\dashboard\\Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":5,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { Home, PieChart, ArrowUpRight, ArrowDownRight, Settings, Shield } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { WalletConnectButton } from \"@/components/ui/WalletConnectButton\";\r\nimport { useWallet } from \"@/lib/use-wallet\";\r\n\r\nconst navItems = [\r\n    { name: \"Terminal\", href: \"/terminal\", icon: Home },\r\n    { name: \"Portfolio\", href: \"/terminal/portfolio\", icon: PieChart },\r\n    { name: \"Deposit\", href: \"/terminal/deposit\", icon: ArrowUpRight },\r\n    { name: \"Withdraw\", href: \"/terminal/withdraw\", icon: ArrowDownRight },\r\n];\r\n\r\ninterface SidebarProps {\r\n    collapsed: boolean;\r\n    onToggle: () => void;\r\n}\r\n\r\nexport function Sidebar({ collapsed, onToggle }: SidebarProps) {\r\n    const pathname = usePathname();\r\n    const { isAdmin, isConnected } = useWallet();\r\n\r\n    return (\r\n        <div\r\n            className={cn(\r\n                \"h-screen border-r border-white/10 bg-surface/30 backdrop-blur-md flex flex-col p-4 fixed left-0 top-0 z-50 transition-all duration-300\",\r\n                collapsed ? \"w-20\" : \"w-64\"\r\n            )}\r\n        >\r\n            {/* Header / Toggle */}\r\n            <div className=\"mb-6 flex items-center justify-between px-2\">\r\n                {!collapsed && (\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center border border-primary/50\">\r\n                            <div className=\"w-3 h-3 rounded-full bg-primary shadow-[0_0_10px_#00E0FF]\" />\r\n                        </div>\r\n                        <span className=\"font-mono font-bold text-lg tracking-wider text-white\">OPOLL</span>\r\n                    </div>\r\n                )}\r\n                <button\r\n                    onClick={onToggle}\r\n                    className={cn(\r\n                        \"p-1.5 rounded-lg hover:bg-white/10 text-white/60 hover:text-white transition-colors\",\r\n                        collapsed ? \"mx-auto\" : \"\"\r\n                    )}\r\n                >\r\n                    {collapsed ? <ArrowUpRight className=\"rotate-45\" /> : <ArrowDownRight className=\"rotate-[135deg]\" />}\r\n                </button>\r\n            </div>\r\n\r\n            {/* Navigation */}\r\n            <nav className=\"flex-1 space-y-2\">\r\n                {navItems.map((item) => {\r\n                    const isActive = pathname === item.href;\r\n                    const Icon = item.icon;\r\n                    return (\r\n                        <Link\r\n                            key={item.href}\r\n                            href={item.href}\r\n                            className={cn(\r\n                                \"flex items-center gap-3 px-3 py-3 rounded-xl transition-all duration-300 group\",\r\n                                isActive\r\n                                    ? \"bg-primary/10 text-primary border border-primary/20\"\r\n                                    : \"text-white/60 hover:text-white hover:bg-white/5\",\r\n                                collapsed ? \"justify-center\" : \"\"\r\n                            )}\r\n                            title={collapsed ? item.name : undefined}\r\n                        >\r\n                            <Icon className={cn(\"w-5 h-5 transition-transform group-hover:scale-110\", isActive && \"text-primary\")} />\r\n                            {!collapsed && <span className=\"font-medium text-sm\">{item.name}</span>}\r\n                            {isActive && !collapsed && (\r\n                                <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-primary shadow-[0_0_8px_#00E0FF]\" />\r\n                            )}\r\n                        </Link>\r\n                    );\r\n                })}\r\n\r\n                {/* Admin Link - Only visible if user has 50M+ tokens */}\r\n                {isConnected && isAdmin && (\r\n                    <Link\r\n                        href=\"/admin\"\r\n                        className={cn(\r\n                            \"flex items-center gap-3 px-3 py-3 rounded-xl transition-all duration-300 group mt-4 border\",\r\n                            pathname === \"/admin\"\r\n                                ? \"bg-amber-500/20 text-amber-400 border-amber-500/30\"\r\n                                : \"text-amber-400/60 hover:text-amber-400 hover:bg-amber-500/10 border-transparent hover:border-amber-500/20\",\r\n                            collapsed ? \"justify-center\" : \"\"\r\n                        )}\r\n                        title={collapsed ? \"Admin Panel\" : undefined}\r\n                    >\r\n                        <Shield className=\"w-5 h-5\" />\r\n                        {!collapsed && <span className=\"font-medium text-sm\">Admin Panel</span>}\r\n                    </Link>\r\n                )}\r\n            </nav>\r\n\r\n            {/* Wallet Connect Section - Moved to Bottom */}\r\n            <div className=\"pt-4 border-t border-white/10 px-2 mt-auto\">\r\n                <WalletConnectButton minimal={true} />\r\n            </div>\r\n\r\n            {!collapsed && (\r\n                <div className=\"pt-2 text-center\">\r\n                    <span className=\"text-[10px] text-white/20\">Powered by BNB Chain</span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\mobile\\BottomNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\mobile\\MobileTerminal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertModal' is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1431,1434],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1431,1434],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":88,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":117,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":133,"column":8,"nodeType":"ArrayExpression","endLine":133,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [isConnected, address, fetchData]","fix":{"range":[5357,5379],"text":"[isConnected, address, fetchData]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isOpen' is defined but never used.","line":329,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":329,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isSuccess' is assigned a value but never used.","line":334,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":334,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":337,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":337,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16454,16457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16454,16457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { AreaChart, Area, XAxis, YAxis, ResponsiveContainer, CartesianGrid, Tooltip } from 'recharts';\r\nimport { TrendingUp, Wallet, ArrowDown, X, Activity, DollarSign, BarChart2 } from \"lucide-react\";\r\nimport { useWallet } from \"@/lib/use-wallet\";\r\nimport { web3Service } from '@/lib/web3';\r\nimport { SkeletonLoader } from \"@/components/ui/SkeletonLoader\";\r\nimport NeonSlider from \"@/components/ui/NeonSlider\";\r\nimport { SuccessModal } from \"@/components/ui/SuccessModal\";\r\nimport { AlertModal } from \"@/components/ui/AlertModal\";\r\nimport { useWriteContract, useWaitForTransactionReceipt } from 'wagmi';\r\nimport { parseUnits } from 'viem';\r\nimport { getContracts } from '@/lib/contracts';\r\nimport { useWeb3Modal } from '@web3modal/wagmi/react';\r\nimport GlassCard from \"@/components/ui/GlassCard\";\r\nimport NeonButton from \"@/components/ui/NeonButton\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\n// Contract ABI\r\nconst MARKET_ABI = [\r\n    {\r\n        name: 'buyShares',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [\r\n            { name: '_marketId', type: 'uint256' },\r\n            { name: '_isYes', type: 'bool' },\r\n            { name: '_shares', type: 'uint256' },\r\n            { name: '_maxCost', type: 'uint256' }\r\n        ],\r\n        outputs: [],\r\n    },\r\n] as const;\r\n\r\nconst contracts = getContracts() as any;\r\nconst MARKET_CONTRACT = (contracts.predictionMarket || '0x5F9C05bE2Af2adb520825950323774eFF308E353') as `0x${string}`;\r\n\r\ninterface Market {\r\n    id: number;\r\n    question: string;\r\n    yesOdds: number;\r\n    noOdds: number;\r\n    yesShares: string;\r\n    noShares: string;\r\n    yesPool: string;\r\n    noPool: string;\r\n    totalVolume: string;\r\n    endTime: number;\r\n    resolved: boolean;\r\n}\r\n\r\nexport function MobileTerminal() {\r\n    const [markets, setMarkets] = useState<Market[]>([]);\r\n    const [selectedMarketId, setSelectedMarketId] = useState<number>(0);\r\n    const [balance, setBalance] = useState<string>('0');\r\n    const [loading, setLoading] = useState(true);\r\n    const [priceHistory, setPriceHistory] = useState<{ time: string, price: number }[]>([]);\r\n    const [chartView, setChartView] = useState<'YES' | 'NO'>('YES');\r\n    const [isTradeSheetOpen, setIsTradeSheetOpen] = useState(false);\r\n    const [tradeSide, setTradeSide] = useState<'YES' | 'NO'>('YES');\r\n\r\n    const { isConnected, address } = useWallet();\r\n    const { open } = useWeb3Modal();\r\n\r\n    const market = markets.find(m => m.id === selectedMarketId) || markets[0];\r\n    const chartData = (priceHistory.length > 0 ? priceHistory : [{ time: 'Now', price: market?.yesOdds || 50 }])\r\n        .map(point => ({\r\n            time: point.time,\r\n            price: chartView === 'YES' ? point.price : (100 - point.price)\r\n        }));\r\n\r\n    // Data Fetching\r\n    useEffect(() => {\r\n        async function fetchPriceHistory() {\r\n            if (selectedMarketId === undefined) return;\r\n            try {\r\n                const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n                if (apiUrl) {\r\n                    const response = await fetch(`${apiUrl}/api/markets/${selectedMarketId}/price-history?limit=20`);\r\n                    const data = await response.json();\r\n                    if (data.success && data.history?.length > 0) {\r\n                        setPriceHistory(data.history);\r\n                    } else {\r\n                        setPriceHistory([{ time: 'Now', price: market?.yesOdds || 50 }]);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                setPriceHistory([{ time: 'Now', price: market?.yesOdds || 50 }]);\r\n            }\r\n        }\r\n        fetchPriceHistory();\r\n    }, [selectedMarketId, market?.yesOdds]);\r\n\r\n    const fetchData = async () => {\r\n        if (!isConnected || !address) return;\r\n        try {\r\n            const allMarkets = await web3Service.getMarkets();\r\n            setMarkets(allMarkets);\r\n\r\n            try {\r\n                const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n                if (apiUrl) {\r\n                    const linkResponse = await fetch(`${apiUrl}/api/wallet/link`, {\r\n                        method: 'POST',\r\n                        body: JSON.stringify({ walletAddress: address })\r\n                    });\r\n                    const linkData = await linkResponse.json();\r\n                    if (linkData.success) {\r\n                        const depositedBalance = await web3Service.getDepositedBalance(linkData.custodialAddress);\r\n                        setBalance(depositedBalance);\r\n                    }\r\n                } else {\r\n                    const depositedBalance = await web3Service.getDepositedBalance(address);\r\n                    setBalance(depositedBalance);\r\n                }\r\n            } catch (e) {\r\n                const depositedBalance = await web3Service.getDepositedBalance(address);\r\n                setBalance(depositedBalance);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isConnected) { setLoading(false); return; }\r\n        fetchData();\r\n        const interval = setInterval(fetchData, 15000);\r\n        return () => clearInterval(interval);\r\n    }, [isConnected, address]);\r\n\r\n    if (!isConnected) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center min-h-[80vh] relative overflow-hidden p-6\">\r\n                <div className=\"absolute inset-0 bg-gradient-radial from-neon-cyan/10 to-transparent opacity-50\" />\r\n                <GlassCard className=\"p-8 text-center w-full max-w-sm relative z-10 border-neon-cyan/20\">\r\n                    <div className=\"w-20 h-20 mx-auto mb-6 rounded-full bg-neon-cyan/5 border border-neon-cyan/20 flex items-center justify-center shadow-[0_0_30px_rgba(0,240,255,0.1)]\">\r\n                        <Wallet className=\"w-8 h-8 text-neon-cyan\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-heading font-bold text-white mb-2\">Connect to Trade</h2>\r\n                    <p className=\"text-text-secondary mb-8 text-sm\">Access neural markets on the go.</p>\r\n                    <NeonButton onClick={() => open()} variant=\"cyan\" className=\"w-full\">\r\n                        CONNECT WALLET\r\n                    </NeonButton>\r\n                </GlassCard>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (loading) return <div className=\"p-6\"><SkeletonLoader /></div>;\r\n    if (!market) return <div className=\"p-6 text-white/50 flex items-center justify-center h-[80vh] font-mono\">[SYSTEM: NO MARKETS]</div>;\r\n\r\n    const currentPrice = chartView === 'YES' ? market.yesOdds : (100 - market.yesOdds);\r\n    const priceColor = chartView === 'YES' ? \"#27E8A7\" : \"#FF2E63\";\r\n\r\n    return (\r\n        <div className=\"pb-32 relative min-h-screen\">\r\n\r\n            {/* 1. Header */}\r\n            <header className=\"px-4 py-4 pt-6 sticky top-0 z-30 bg-void/80 backdrop-blur-xl border-b border-white/5 flex justify-between items-center\">\r\n                <div\r\n                    onClick={() => {/* TODO: Open Drawer */ }}\r\n                    className=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/10 active:bg-white/10 transition-colors\"\r\n                >\r\n                    <div className=\"w-2 h-2 rounded-full bg-neon-cyan animate-pulse\" />\r\n                    <span className=\"text-xs font-mono font-bold text-white tracking-widest\">MARKET #{market.id}</span>\r\n                    <ArrowDown size={12} className=\"text-white/50\" />\r\n                </div>\r\n\r\n                <div className=\"text-right\">\r\n                    <div className=\"text-[10px] text-text-secondary uppercase tracking-widest\">Balance</div>\r\n                    <div className=\"font-mono text-sm text-white\">\r\n                        <span className=\"text-neon-cyan\">$</span>\r\n                        {parseFloat(balance).toLocaleString(undefined, { maximumFractionDigits: 2 })}\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* 2. Price Hero */}\r\n            <div className=\"px-6 py-8\">\r\n                <h1 className=\"text-2xl font-heading font-bold text-white mb-2 leading-tight\">{market.question}</h1>\r\n                <div className=\"flex items-end gap-3 mt-4\">\r\n                    <div className={`text-5xl font-mono font-bold tracking-tighter ${chartView === 'YES' ? 'text-neon-green text-shadow-green' : 'text-neon-coral text-shadow-red'}`}>\r\n                        {currentPrice.toFixed(1)}%\r\n                    </div>\r\n                    <div className=\"text-sm font-mono text-text-secondary mb-2 uppercase tracking-wider\">Probability</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 3. Controls */}\r\n            <div className=\"px-6 mb-6 flex gap-3\">\r\n                <button\r\n                    onClick={() => setChartView('YES')}\r\n                    className={`flex-1 py-3 rounded-xl text-xs font-bold font-mono tracking-wider transition-all border ${chartView === 'YES'\r\n                            ? 'bg-neon-green/10 border-neon-green text-neon-green shadow-[0_0_15px_rgba(39,232,167,0.2)]'\r\n                            : 'bg-white/5 border-white/5 text-white/40'\r\n                        }`}\r\n                >\r\n                    YES POOL\r\n                </button>\r\n                <button\r\n                    onClick={() => setChartView('NO')}\r\n                    className={`flex-1 py-3 rounded-xl text-xs font-bold font-mono tracking-wider transition-all border ${chartView === 'NO'\r\n                            ? 'bg-neon-coral/10 border-neon-coral text-neon-coral shadow-[0_0_15px_rgba(255,46,99,0.2)]'\r\n                            : 'bg-white/5 border-white/5 text-white/40'\r\n                        }`}\r\n                >\r\n                    NO POOL\r\n                </button>\r\n            </div>\r\n\r\n            {/* 4. Chart */}\r\n            <div className=\"h-[280px] w-full mb-8 relative\">\r\n                <div className=\"absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-void to-transparent z-10 pointer-events-none\" />\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <AreaChart data={chartData}>\r\n                        <defs>\r\n                            <linearGradient id=\"mobileColor\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                <stop offset=\"5%\" stopColor={priceColor} stopOpacity={0.4} />\r\n                                <stop offset=\"95%\" stopColor={priceColor} stopOpacity={0} />\r\n                            </linearGradient>\r\n                        </defs>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" vertical={false} />\r\n                        <XAxis dataKey=\"time\" hide />\r\n                        <YAxis domain={[0, 100]} hide />\r\n                        <Tooltip\r\n                            contentStyle={{\r\n                                backgroundColor: 'rgba(5, 5, 10, 0.9)',\r\n                                border: '1px solid rgba(255,255,255,0.1)',\r\n                                borderRadius: '12px',\r\n                                backdropFilter: 'blur(10px)',\r\n                                fontSize: '12px'\r\n                            }}\r\n                            itemStyle={{ color: '#fff', fontFamily: 'var(--font-jetbrains-mono)' }}\r\n                        />\r\n                        <Area\r\n                            type=\"monotone\"\r\n                            dataKey=\"price\"\r\n                            stroke={priceColor}\r\n                            strokeWidth={3}\r\n                            fillOpacity={1}\r\n                            fill=\"url(#mobileColor)\"\r\n                            className=\"drop-shadow-[0_0_10px_rgba(0,0,0,0.5)]\"\r\n                        />\r\n                    </AreaChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n\r\n            {/* 5. Metrics Cards */}\r\n            <div className=\"px-4 grid grid-cols-2 gap-4 mb-10\">\r\n                <GlassCard className=\"p-4 !bg-white/5\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <Activity size={14} className=\"text-neon-cyan\" />\r\n                        <span className=\"text-[10px] text-text-secondary uppercase tracking-widest\">Volume</span>\r\n                    </div>\r\n                    <div className=\"font-mono text-lg text-white font-medium\">${market.totalVolume}</div>\r\n                </GlassCard>\r\n                <GlassCard className=\"p-4 !bg-white/5\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <BarChart2 size={14} className=\"text-neon-purple\" />\r\n                        <span className=\"text-[10px] text-text-secondary uppercase tracking-widest\">Liquidity</span>\r\n                    </div>\r\n                    <div className=\"font-mono text-lg text-white font-medium\">\r\n                        ${(parseFloat(market.yesPool) + parseFloat(market.noPool)).toFixed(0)}\r\n                    </div>\r\n                </GlassCard>\r\n            </div>\r\n\r\n            {/* 6. Other Markets */}\r\n            <div className=\"px-4 pb-4\">\r\n                <h3 className=\"text-xs font-bold text-text-secondary uppercase tracking-widest mb-4 px-2\">Live Feeds</h3>\r\n                <div className=\"space-y-3\">\r\n                    {markets.filter(m => m.id !== market.id).map(m => (\r\n                        <GlassCard\r\n                            key={m.id}\r\n                            className=\"p-4 active:scale-[0.98] transition-all duration-200\"\r\n                            onClick={() => setSelectedMarketId(m.id)}\r\n                        >\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <h4 className=\"text-sm font-medium text-white line-clamp-2 w-3/4 leading-snug\">{m.question}</h4>\r\n                                <span className={`font-mono text-sm font-bold ${m.yesOdds >= 50 ? 'text-neon-green' : 'text-neon-coral'}`}>\r\n                                    {m.yesOdds.toFixed(0)}%\r\n                                </span>\r\n                            </div>\r\n                        </GlassCard>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* 7. Action Bar */}\r\n            <div className=\"fixed bottom-0 left-0 w-full p-4 pb-8 bg-gradient-to-t from-void via-void/95 to-transparent z-40 flex gap-4\">\r\n                <NeonButton\r\n                    variant=\"green\"\r\n                    className=\"flex-1 py-4 text-base shadow-[0_0_20px_rgba(39,232,167,0.3)]\"\r\n                    onClick={() => { setTradeSide('YES'); setIsTradeSheetOpen(true); }}\r\n                >\r\n                    LONG YES\r\n                </NeonButton>\r\n                <NeonButton\r\n                    variant=\"red\"\r\n                    className=\"flex-1 py-4 text-base shadow-[0_0_20px_rgba(255,46,99,0.3)]\"\r\n                    onClick={() => { setTradeSide('NO'); setIsTradeSheetOpen(true); }}\r\n                >\r\n                    SHORT NO\r\n                </NeonButton>\r\n            </div>\r\n\r\n            {/* Bottom Sheet */}\r\n            <AnimatePresence>\r\n                {isTradeSheetOpen && (\r\n                    <TradeBottomSheet\r\n                        isOpen={isTradeSheetOpen}\r\n                        onClose={() => setIsTradeSheetOpen(false)}\r\n                        market={market}\r\n                        side={tradeSide}\r\n                        balance={balance}\r\n                        onTradeSuccess={fetchData}\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Mobile Trade Sheet\r\nfunction TradeBottomSheet({ isOpen, onClose, market, side, balance, onTradeSuccess }: { isOpen: boolean; onClose: () => void; market: Market; side: 'YES' | 'NO'; balance: string; onTradeSuccess: () => void }) {\r\n    const [amount, setAmount] = useState('100');\r\n    const [loading, setLoading] = useState(false);\r\n    const { address } = useWallet();\r\n    const { writeContract, data: hash } = useWriteContract();\r\n    const { isSuccess } = useWaitForTransactionReceipt({ hash });\r\n\r\n    const [isSuccessModalOpen, setIsSuccessModalOpen] = useState(false);\r\n    const [successData, setSuccessData] = useState<any>(null);\r\n\r\n    const currentPrice = side === 'YES' ? market.yesOdds : (100 - market.yesOdds);\r\n    const estShares = parseFloat(amount || '0') / (currentPrice / 100);\r\n\r\n    const handleBuy = async () => {\r\n        if (!amount || parseFloat(amount) <= 0) return;\r\n        setLoading(true);\r\n        try {\r\n            const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n            if (apiUrl) {\r\n                const response = await fetch(`${apiUrl}/api/bet`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        walletAddress: address,\r\n                        marketId: market.id,\r\n                        side,\r\n                        shares: estShares,\r\n                        amount: parseFloat(amount)\r\n                    })\r\n                });\r\n                const data = await response.json();\r\n                if (data.success) {\r\n                    setSuccessData({\r\n                        marketId: market.id,\r\n                        side,\r\n                        shares: data.transaction?.shares || estShares,\r\n                        cost: parseFloat(amount),\r\n                        question: market.question\r\n                    });\r\n                    setIsSuccessModalOpen(true);\r\n                }\r\n            } else {\r\n                const sharesInUnits = parseUnits(estShares.toFixed(2), 6);\r\n                const maxCost = parseUnits(amount, 6);\r\n                writeContract({\r\n                    address: MARKET_CONTRACT,\r\n                    abi: MARKET_ABI,\r\n                    functionName: 'buyShares',\r\n                    args: [BigInt(market.id), side === 'YES', sharesInUnits, maxCost],\r\n                });\r\n                setSuccessData({\r\n                    marketId: market.id,\r\n                    side,\r\n                    shares: estShares,\r\n                    cost: parseFloat(amount),\r\n                    question: market.question\r\n                });\r\n                setIsSuccessModalOpen(true);\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const colorClass = side === 'YES' ? 'text-neon-green' : 'text-neon-coral';\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[60] flex items-end justify-center\">\r\n\r\n            <SuccessModal\r\n                isOpen={isSuccessModalOpen}\r\n                onClose={() => {\r\n                    setIsSuccessModalOpen(false);\r\n                    onClose();\r\n                    onTradeSuccess();\r\n                }}\r\n                data={successData || {}}\r\n            />\r\n\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\"\r\n                onClick={onClose}\r\n            />\r\n\r\n            <motion.div\r\n                initial={{ y: \"100%\" }}\r\n                animate={{ y: 0 }}\r\n                exit={{ y: \"100%\" }}\r\n                transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n                className=\"bg-surface border-t border-white/10 w-full rounded-t-3xl p-6 relative z-10 max-h-[80vh] overflow-y-auto\"\r\n            >\r\n                <div className=\"w-12 h-1 bg-white/20 rounded-full mx-auto mb-8\" />\r\n\r\n                <div className=\"flex justify-between items-center mb-8\">\r\n                    <div>\r\n                        <div className=\"text-xs text-text-secondary uppercase tracking-widest mb-1\">Position</div>\r\n                        <h3 className={`text-2xl font-heading font-bold ${colorClass}`}>LONG {side}</h3>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 bg-white/5 rounded-full text-white/50 hover:bg-white/10 hover:text-white transition-colors\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    <div>\r\n                        <div className=\"flex justify-between text-xs text-text-secondary uppercase tracking-widest mb-3\">\r\n                            <span>Amount (USDC)</span>\r\n                            <span>Bal: ${parseFloat(balance).toLocaleString()}</span>\r\n                        </div>\r\n                        <div className=\"relative group\">\r\n                            <input\r\n                                type=\"number\"\r\n                                value={amount}\r\n                                onChange={(e) => setAmount(e.target.value)}\r\n                                className=\"w-full bg-void/50 border border-white/10 rounded-xl p-4 pl-12 text-2xl font-mono text-white focus:outline-none focus:border-neon-cyan/50 focus:shadow-[0_0_20px_rgba(0,240,255,0.1)] transition-all\"\r\n                            />\r\n                            <DollarSign className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white/30 group-focus-within:text-neon-cyan transition-colors\" size={20} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <GlassCard className=\"p-4 !bg-white/5 space-y-3\">\r\n                        <div className=\"flex justify-between items-center text-sm\">\r\n                            <span className=\"text-white/50\">Entry Price</span>\r\n                            <span className=\"font-mono text-white\">${(currentPrice / 100).toFixed(2)}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between items-center text-sm border-t border-white/5 pt-3\">\r\n                            <span className=\"text-white/50\">Est. Shares</span>\r\n                            <span className={`font-mono text-xl font-bold ${colorClass}`}>{estShares.toFixed(2)}</span>\r\n                        </div>\r\n                    </GlassCard>\r\n\r\n                    <NeonSlider\r\n                        onConfirm={handleBuy}\r\n                        isLoading={loading}\r\n                        text={`SLIDE TO TRADE`}\r\n                        side={side}\r\n                        disabled={loading || !amount}\r\n                    />\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\terminal\\DesktopTerminal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ResolutionPanel' is defined but never used.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1496,1499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1496,1499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'apiError' is defined but never used.","line":126,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":126,"endColumn":30},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":141,"column":8,"nodeType":"ArrayExpression","endLine":141,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [isConnected, address, fetchData]","fix":{"range":[5508,5530],"text":"[isConnected, address, fetchData]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'writeError' is assigned a value but never used.","line":368,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":368,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isConfirming' is assigned a value but never used.","line":369,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":369,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isSuccess' is assigned a value but never used.","line":369,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":369,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":371,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":371,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20066,20069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20066,20069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":448,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":448,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23182,23185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23182,23185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Activity, Users, DollarSign, TrendingUp, Wallet, BarChart2 } from \"lucide-react\";\r\nimport { AreaChart, Area, XAxis, YAxis, Tooltip, ResponsiveContainer, CartesianGrid } from 'recharts';\r\nimport { useEffect, useState } from 'react';\r\nimport { web3Service } from '@/lib/web3';\r\nimport { SkeletonLoader } from \"@/components/ui/SkeletonLoader\";\r\nimport { SuccessModal } from \"@/components/ui/SuccessModal\";\r\nimport NeonSlider from \"@/components/ui/NeonSlider\";\r\nimport { ResolutionPanel } from \"@/components/ui/ResolutionPanel\";\r\nimport { useWallet } from \"@/lib/use-wallet\";\r\nimport { useWeb3Modal } from '@web3modal/wagmi/react';\r\nimport { AlertModal } from \"@/components/ui/AlertModal\";\r\nimport { useWriteContract, useWaitForTransactionReceipt } from 'wagmi';\r\nimport { parseUnits } from 'viem';\r\nimport { getContracts } from '@/lib/contracts';\r\nimport GlassCard from \"@/components/ui/GlassCard\";\r\nimport NeonButton from \"@/components/ui/NeonButton\";\r\nimport { motion } from \"framer-motion\";\r\n\r\n// Market Contract ABI for buyShares\r\nconst MARKET_ABI = [\r\n    {\r\n        name: 'buyShares',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [\r\n            { name: '_marketId', type: 'uint256' },\r\n            { name: '_isYes', type: 'bool' },\r\n            { name: '_shares', type: 'uint256' },\r\n            { name: '_maxCost', type: 'uint256' }\r\n        ],\r\n        outputs: [],\r\n    },\r\n] as const;\r\n\r\nconst contracts = getContracts() as any;\r\nconst MARKET_CONTRACT = (contracts.predictionMarket || '0x5F9C05bE2Af2adb520825950323774eFF308E353') as `0x${string}`;\r\n\r\ninterface Market {\r\n    id: number;\r\n    question: string;\r\n    yesOdds: number;\r\n    noOdds: number;\r\n    yesShares: string;\r\n    noShares: string;\r\n    yesPool: string;\r\n    noPool: string;\r\n    totalVolume: string;\r\n    endTime: number;\r\n    resolved: boolean;\r\n}\r\n\r\nexport function DesktopTerminal() {\r\n    const [markets, setMarkets] = useState<Market[]>([]);\r\n    const [selectedMarketId, setSelectedMarketId] = useState<number>(0);\r\n    const [balance, setBalance] = useState<string>('0');\r\n    const [loading, setLoading] = useState(true);\r\n    const [priceHistory, setPriceHistory] = useState<{ time: string, price: number }[]>([]);\r\n    const [chartView, setChartView] = useState<'YES' | 'NO'>('YES');\r\n\r\n    // Wallet connection state\r\n    const { isConnected, address } = useWallet();\r\n    const { open } = useWeb3Modal();\r\n\r\n    // Get selected market\r\n    const market = markets.find(m => m.id === selectedMarketId) || markets[0];\r\n\r\n    // Chart data logic\r\n    const chartData = (priceHistory.length > 0 ? priceHistory : [{ time: 'Now', price: market?.yesOdds || 50 }])\r\n        .map(point => ({\r\n            time: point.time,\r\n            price: chartView === 'YES' ? point.price : (100 - point.price)\r\n        }));\r\n\r\n    // Fetch price history\r\n    useEffect(() => {\r\n        async function fetchPriceHistory() {\r\n            if (selectedMarketId === undefined) return;\r\n            try {\r\n                const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n                if (apiUrl) {\r\n                    const response = await fetch(`${apiUrl}/api/markets/${selectedMarketId}/price-history?limit=20`);\r\n                    const data = await response.json();\r\n                    if (data.success && data.history?.length > 0) {\r\n                        setPriceHistory(data.history);\r\n                    } else {\r\n                        setPriceHistory([{ time: 'Now', price: market?.yesOdds || 50 }]);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.warn('Failed to fetch price history:', error);\r\n                setPriceHistory([{ time: 'Now', price: market?.yesOdds || 50 }]);\r\n            }\r\n        }\r\n        fetchPriceHistory();\r\n    }, [selectedMarketId, market?.yesOdds]);\r\n\r\n    // Data fetching\r\n    const fetchData = async () => {\r\n        if (!isConnected || !address) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const allMarkets = await web3Service.getMarkets();\r\n            setMarkets(allMarkets);\r\n\r\n            try {\r\n                const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n                if (apiUrl) {\r\n                    const linkResponse = await fetch(`${apiUrl}/api/wallet/link`, {\r\n                        method: 'POST',\r\n                        body: JSON.stringify({ walletAddress: address })\r\n                    });\r\n                    const linkData = await linkResponse.json();\r\n                    if (linkData.success) {\r\n                        const depositedBalance = await web3Service.getDepositedBalance(linkData.custodialAddress);\r\n                        setBalance(depositedBalance);\r\n                    }\r\n                } else {\r\n                    const depositedBalance = await web3Service.getDepositedBalance(address!);\r\n                    setBalance(depositedBalance);\r\n                }\r\n            } catch (apiError) {\r\n                const depositedBalance = await web3Service.getDepositedBalance(address!);\r\n                setBalance(depositedBalance);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching markets:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const interval = setInterval(fetchData, 15000);\r\n        return () => clearInterval(interval);\r\n    }, [isConnected, address]);\r\n\r\n    // Not Connected State\r\n    if (!isConnected) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center min-h-[80vh] relative overflow-hidden\">\r\n                <div className=\"absolute inset-0 bg-gradient-radial from-neon-cyan/10 to-transparent opacity-50\" />\r\n                <GlassCard className=\"p-12 text-center max-w-lg relative z-10 border-neon-cyan/20\">\r\n                    <div className=\"w-24 h-24 mx-auto mb-8 rounded-full bg-neon-cyan/5 border border-neon-cyan/20 flex items-center justify-center shadow-[0_0_40px_rgba(0,240,255,0.1)]\">\r\n                        <Wallet className=\"w-10 h-10 text-neon-cyan\" />\r\n                    </div>\r\n                    <h2 className=\"text-4xl font-heading font-bold text-white mb-4\">Initialize Terminal</h2>\r\n                    <p className=\"text-text-secondary mb-10 text-lg\">\r\n                        Connect your wallet to access the neural prediction network.\r\n                    </p>\r\n                    <NeonButton onClick={() => open()} variant=\"cyan\" className=\"w-full text-lg py-4\">\r\n                        CONNECT WALLET\r\n                    </NeonButton>\r\n                </GlassCard>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (loading) return <SkeletonLoader />;\r\n\r\n    if (markets.length === 0) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen text-white/50 font-mono\">\r\n                [SYSTEM: NO MARKETS DETECTED]\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-[1920px] mx-auto p-6\">\r\n            {/* Top Bar */}\r\n            <header className=\"flex justify-between items-center mb-8\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"w-2 h-12 bg-neon-cyan rounded-full shadow-[0_0_15px_#00F0FF]\" />\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-heading font-bold text-white tracking-tight\">OPOLL TERMINAL</h1>\r\n                        <div className=\"flex items-center gap-2 text-xs font-mono text-neon-cyan/80\">\r\n                            <span className=\"w-2 h-2 bg-neon-green rounded-full animate-pulse\" />\r\n                            NETWORK ONLINE\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <GlassCard className=\"px-6 py-3 flex items-center gap-6 !rounded-full\">\r\n                    <div className=\"text-right\">\r\n                        <div className=\"text-[10px] text-text-secondary uppercase tracking-widest mb-1\">Portfolio Value</div>\r\n                        <div className=\"text-xl font-mono text-white relative\">\r\n                            <span className=\"text-neon-cyan mr-1\">$</span>\r\n                            {parseFloat(balance).toLocaleString('en-US', { minimumFractionDigits: 2 })}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"w-px h-8 bg-white/10\" />\r\n                    <NeonButton variant=\"glass\" className=\"py-2 px-4 text-xs !rounded-full\">\r\n                        DEPOSIT\r\n                    </NeonButton>\r\n                </GlassCard>\r\n            </header>\r\n\r\n            {/* Main Grid */}\r\n            <div className=\"grid grid-cols-12 gap-6 h-[calc(100vh-180px)]\">\r\n\r\n                {/* LEFT: Market List */}\r\n                <div className=\"col-span-3 h-full overflow-hidden flex flex-col gap-4\">\r\n                    <GlassCard className=\"flex-1 flex flex-col p-4 !bg-glass\">\r\n                        <h3 className=\"text-xs font-bold text-text-secondary uppercase tracking-widest mb-4 px-2\">Active Markets</h3>\r\n                        <div className=\"flex-1 overflow-y-auto space-y-3 pr-2 custom-scrollbar\">\r\n                            {markets.map((m) => (\r\n                                <motion.button\r\n                                    key={m.id}\r\n                                    onClick={() => setSelectedMarketId(m.id)}\r\n                                    whileHover={{ scale: 1.02, x: 5 }}\r\n                                    className={`w-full text-left p-4 rounded-xl border transition-all duration-300 relative overflow-hidden group\r\n                                        ${selectedMarketId === m.id\r\n                                            ? 'bg-neon-cyan/10 border-neon-cyan/50 shadow-[0_0_20px_rgba(0,240,255,0.1)]'\r\n                                            : 'bg-white/5 border-white/5 hover:bg-white/10'\r\n                                        }`}\r\n                                >\r\n                                    {selectedMarketId === m.id && (\r\n                                        <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-neon-cyan\" />\r\n                                    )}\r\n\r\n                                    <h4 className={`text-sm font-medium mb-3 line-clamp-2 ${selectedMarketId === m.id ? 'text-white' : 'text-white/70'}`}>\r\n                                        {m.question}\r\n                                    </h4>\r\n\r\n                                    <div className=\"flex justify-between items-center text-xs font-mono\">\r\n                                        <div className={`flex items-center gap-1 ${m.yesOdds >= 50 ? 'text-neon-green' : 'text-neon-coral'}`}>\r\n                                            <TrendingUp size={12} />\r\n                                            <span className=\"font-bold\">{m.yesOdds.toFixed(0)}%</span>\r\n                                        </div>\r\n                                        <span className=\"text-white/30\">Vol: ${m.totalVolume}</span>\r\n                                    </div>\r\n                                </motion.button>\r\n                            ))}\r\n                        </div>\r\n                    </GlassCard>\r\n                </div>\r\n\r\n                {/* CENTER: Chart & Info */}\r\n                <div className=\"col-span-6 flex flex-col gap-6\">\r\n                    {market && (\r\n                        <GlassCard className=\"flex-1 p-6 relative flex flex-col\">\r\n                            {/* Market Header */}\r\n                            <div className=\"flex justify-between items-start mb-8 z-10\">\r\n                                <div>\r\n                                    <div className=\"flex items-center gap-2 mb-3\">\r\n                                        <span className=\"bg-neon-coral/20 text-neon-coral text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wider border border-neon-coral/20\">Live Market</span>\r\n                                        <span className=\"text-text-secondary text-xs font-mono\">#{market.id}</span>\r\n                                    </div>\r\n                                    <h2 className=\"text-3xl font-heading font-medium text-white leading-tight max-w-2xl\">\r\n                                        {market.question}\r\n                                    </h2>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <div className={`text-5xl font-mono font-bold tracking-tighter ${market.yesOdds >= 50 ? 'text-neon-green text-shadow-green' : 'text-neon-coral text-shadow-red'}`}>\r\n                                        {market.yesOdds.toFixed(1)}%\r\n                                    </div>\r\n                                    <div className=\"text-xs text-text-secondary font-mono mt-1\">PROBABILITY</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Main Chart */}\r\n                            <div className=\"flex-1 w-full min-h-[300px] relative\">\r\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                    <AreaChart data={chartData}>\r\n                                        <defs>\r\n                                            <linearGradient id=\"colorPrice\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                                <stop offset=\"5%\" stopColor={chartView === 'YES' ? \"#27E8A7\" : \"#FF2E63\"} stopOpacity={0.4} />\r\n                                                <stop offset=\"95%\" stopColor={chartView === 'YES' ? \"#27E8A7\" : \"#FF2E63\"} stopOpacity={0} />\r\n                                            </linearGradient>\r\n                                        </defs>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" vertical={false} />\r\n                                        <XAxis dataKey=\"time\" stroke=\"rgba(255,255,255,0.2)\" fontSize={12} tickLine={false} axisLine={false} />\r\n                                        <YAxis stroke=\"rgba(255,255,255,0.2)\" fontSize={12} tickLine={false} axisLine={false} domain={[0, 100]} />\r\n                                        <Tooltip\r\n                                            contentStyle={{\r\n                                                backgroundColor: 'rgba(5, 5, 10, 0.9)',\r\n                                                border: '1px solid rgba(255,255,255,0.1)',\r\n                                                borderRadius: '12px',\r\n                                                backdropFilter: 'blur(10px)'\r\n                                            }}\r\n                                            itemStyle={{ color: '#fff', fontFamily: 'var(--font-jetbrains-mono)' }}\r\n                                        />\r\n                                        <Area\r\n                                            type=\"monotone\"\r\n                                            dataKey=\"price\"\r\n                                            stroke={chartView === 'YES' ? \"#27E8A7\" : \"#FF2E63\"}\r\n                                            strokeWidth={3}\r\n                                            fillOpacity={1}\r\n                                            fill=\"url(#colorPrice)\"\r\n                                            className=\"drop-shadow-[0_0_10px_rgba(0,0,0,0.5)]\"\r\n                                        />\r\n                                    </AreaChart>\r\n                                </ResponsiveContainer>\r\n                            </div>\r\n\r\n                            {/* Chart Controls */}\r\n                            <div className=\"absolute top-6 right-6 flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setChartView('YES')}\r\n                                    className={`px-3 py-1 rounded text-xs font-mono transition-all ${chartView === 'YES' ? 'bg-neon-green text-void font-bold' : 'bg-white/5 text-white/50 hover:bg-white/10'}`}\r\n                                >\r\n                                    YES\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setChartView('NO')}\r\n                                    className={`px-3 py-1 rounded text-xs font-mono transition-all ${chartView === 'NO' ? 'bg-neon-coral text-void font-bold' : 'bg-white/5 text-white/50 hover:bg-white/10'}`}\r\n                                >\r\n                                    NO\r\n                                </button>\r\n                            </div>\r\n                        </GlassCard>\r\n                    )}\r\n                </div>\r\n\r\n                {/* RIGHT: Trading Panel */}\r\n                <div className=\"col-span-3 h-full\">\r\n                    {market && (\r\n                        <GlassCard className=\"h-full p-6 flex flex-col bg-surface/40\">\r\n                            <h3 className=\"text-xs font-bold text-text-secondary uppercase tracking-widest mb-6\">Execution</h3>\r\n\r\n                            <TradePanel\r\n                                marketId={market.id}\r\n                                currentPrice={market.yesOdds || 50}\r\n                                question={market.question}\r\n                                balance={balance}\r\n                                onTradeSuccess={fetchData}\r\n                            />\r\n\r\n                            <div className=\"mt-auto border-t border-white/10 pt-6\">\r\n                                <h4 className=\"text-[10px] text-white/30 uppercase tracking-wider mb-4\">Market Depth</h4>\r\n                                <div className=\"space-y-3\">\r\n                                    <div className=\"flex justify-between items-center text-sm\">\r\n                                        <span className=\"text-white/50 flex items-center gap-2\"><div className=\"w-1 h-1 bg-neon-green rounded-full\" /> YES Liquidity</span>\r\n                                        <span className=\"font-mono text-neon-green\">${parseFloat(market.yesPool || '0').toFixed(0)}</span>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between items-center text-sm\">\r\n                                        <span className=\"text-white/50 flex items-center gap-2\"><div className=\"w-1 h-1 bg-neon-coral rounded-full\" /> NO Liquidity</span>\r\n                                        <span className=\"font-mono text-neon-coral\">${parseFloat(market.noPool || '0').toFixed(0)}</span>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between items-center text-sm\">\r\n                                        <span className=\"text-white/50 flex items-center gap-2\"><BarChart2 size={12} /> Volume</span>\r\n                                        <span className=\"font-mono text-white\">${market.totalVolume}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </GlassCard>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Trade Panel\r\nfunction TradePanel({ marketId, currentPrice, question, balance, onTradeSuccess }: { marketId: number; currentPrice: number, question: string, balance: string, onTradeSuccess: () => void }) {\r\n    const { address } = useWallet();\r\n    const [side, setSide] = useState<'YES' | 'NO'>('YES');\r\n    const [amount, setAmount] = useState<string>('100');\r\n    const [estimatedShares, setEstimatedShares] = useState<string>('0');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const { writeContract, data: hash, error: writeError } = useWriteContract();\r\n    const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({ hash });\r\n\r\n    const [successData, setSuccessData] = useState<any>(null);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isErrorModalOpen, setIsErrorModalOpen] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        function calcShares() {\r\n            if (!amount || parseFloat(amount) <= 0) {\r\n                setEstimatedShares('0');\r\n                return;\r\n            }\r\n            const priceDecimal = (side === 'YES' ? currentPrice : 100 - currentPrice) / 100;\r\n            const shares = parseFloat(amount) / priceDecimal;\r\n            setEstimatedShares(shares.toFixed(2));\r\n        }\r\n        calcShares();\r\n    }, [amount, side, currentPrice]);\r\n\r\n    const handleBuy = async () => {\r\n        const cost = parseFloat(amount);\r\n        const currentBalance = parseFloat(balance.replace(/,/g, ''));\r\n\r\n        if (cost > currentBalance) {\r\n            setErrorMessage(`Insufficient Balance. Need $${cost.toFixed(2)}`);\r\n            setIsErrorModalOpen(true);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n            if (apiUrl) {\r\n                // Backend API call code...\r\n                const response = await fetch(`${apiUrl}/api/bet`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        walletAddress: address,\r\n                        marketId,\r\n                        side,\r\n                        shares: parseFloat(estimatedShares),\r\n                        amount: parseFloat(amount)\r\n                    })\r\n                });\r\n                const data = await response.json();\r\n                if (data.success) {\r\n                    setSuccessData({\r\n                        marketId,\r\n                        side,\r\n                        shares: data.transaction?.shares || parseFloat(estimatedShares),\r\n                        cost: data.transaction?.cost || parseFloat(amount),\r\n                        question\r\n                    });\r\n                    setIsModalOpen(true);\r\n                } else {\r\n                    setErrorMessage(data.error || \"Trade failed\");\r\n                    setIsErrorModalOpen(true);\r\n                }\r\n            } else {\r\n                // Direct contract call code...\r\n                const sharesInUnits = parseUnits(estimatedShares, 6);\r\n                const maxCost = parseUnits(amount, 6);\r\n                writeContract({\r\n                    address: MARKET_CONTRACT,\r\n                    abi: MARKET_ABI,\r\n                    functionName: 'buyShares',\r\n                    args: [BigInt(marketId), side === 'YES', sharesInUnits, maxCost],\r\n                });\r\n                setSuccessData({\r\n                    marketId,\r\n                    side,\r\n                    shares: parseFloat(estimatedShares),\r\n                    cost: parseFloat(amount),\r\n                    question\r\n                });\r\n                setIsModalOpen(true);\r\n            }\r\n        } catch (error: any) {\r\n            setErrorMessage(error.message || \"Failed to execute trade\");\r\n            setIsErrorModalOpen(true);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full\">\r\n            <SuccessModal\r\n                isOpen={isModalOpen}\r\n                onClose={() => { setIsModalOpen(false); onTradeSuccess(); }}\r\n                data={successData || {}}\r\n            />\r\n            <AlertModal\r\n                isOpen={isErrorModalOpen}\r\n                onClose={() => setIsErrorModalOpen(false)}\r\n                title=\"Trade Error\"\r\n                message={errorMessage}\r\n                type=\"error\"\r\n            />\r\n\r\n            {/* Position Selector */}\r\n            <div className=\"grid grid-cols-2 gap-3 mb-8\">\r\n                <button\r\n                    onClick={() => setSide('YES')}\r\n                    className={`relative py-4 rounded-xl border transition-all duration-300 ${side === 'YES'\r\n                            ? 'bg-neon-green/10 border-neon-green text-neon-green shadow-[0_0_20px_rgba(39,232,167,0.2)]'\r\n                            : 'bg-white/5 border-white/5 text-white/40 hover:bg-white/10'\r\n                        }`}\r\n                >\r\n                    <span className=\"font-heading font-bold tracking-wider\">LONG YES</span>\r\n                    {side === 'YES' && <div className=\"absolute top-1 right-1 w-2 h-2 rounded-full bg-neon-green animate-pulse\" />}\r\n                </button>\r\n                <button\r\n                    onClick={() => setSide('NO')}\r\n                    className={`relative py-4 rounded-xl border transition-all duration-300 ${side === 'NO'\r\n                            ? 'bg-neon-coral/10 border-neon-coral text-neon-coral shadow-[0_0_20px_rgba(255,46,99,0.2)]'\r\n                            : 'bg-white/5 border-white/5 text-white/40 hover:bg-white/10'\r\n                        }`}\r\n                >\r\n                    <span className=\"font-heading font-bold tracking-wider\">SHORT NO</span>\r\n                    {side === 'NO' && <div className=\"absolute top-1 right-1 w-2 h-2 rounded-full bg-neon-coral animate-pulse\" />}\r\n                </button>\r\n            </div>\r\n\r\n            {/* Input */}\r\n            <div className=\"space-y-6 mb-8 flex-1\">\r\n                <div>\r\n                    <label className=\"text-[10px] text-text-secondary uppercase tracking-widest mb-2 block\">Position Size</label>\r\n                    <div className=\"relative group\">\r\n                        <input\r\n                            type=\"number\"\r\n                            value={amount}\r\n                            onChange={(e) => setAmount(e.target.value)}\r\n                            className=\"w-full bg-void border border-white/10 rounded-xl p-4 pl-12 text-2xl font-mono text-white focus:outline-none focus:border-neon-cyan/50 focus:shadow-[0_0_20px_rgba(0,240,255,0.1)] transition-all\"\r\n                        />\r\n                        <DollarSign className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white/30 group-focus-within:text-neon-cyan transition-colors\" size={20} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3 p-4 rounded-xl bg-white/5 border border-white/5\">\r\n                    <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-white/40\">Est. Shares</span>\r\n                        <span className=\"font-mono text-white\">{parseFloat(estimatedShares).toLocaleString()}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-white/40\">Entry Price</span>\r\n                        <span className=\"font-mono text-white/60\">${((side === 'YES' ? currentPrice : 100 - currentPrice) / 100).toFixed(2)}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Slider */}\r\n            <div className=\"mt-auto\">\r\n                <NeonSlider\r\n                    onConfirm={handleBuy}\r\n                    isLoading={loading}\r\n                    disabled={loading || !amount || parseFloat(amount) <= 0}\r\n                    side={side}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\AlertModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\BackgroundMesh.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\GlassCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, MotionProps } from \"framer-motion\";\r\nimport { ReactNode } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\ninterface GlassCardProps extends MotionProps {\r\n    children: ReactNode;\r\n    className?: string;\r\n    hoverEffect?: boolean;\r\n}\r\n\r\nexport default function GlassCard({ children, className, hoverEffect = true, ...props }: GlassCardProps) {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.4, ease: \"easeOut\" }}\r\n            className={twMerge(\r\n                \"glass-panel rounded-xl overflow-hidden relative\",\r\n                hoverEffect && \"hover:border-white/20 transition-colors duration-300\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {hoverEffect && (\r\n                <div className=\"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 hover:opacity-100 transition-opacity pointer-events-none\" />\r\n            )}\r\n            {children}\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\NeonButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\NeonSlider.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\NeonSlider.tsx:39:13\n  37 |     useEffect(() => {\n  38 |         if (!isLoading && complete) {\n> 39 |             setComplete(false);\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  40 |             x.set(0);\n  41 |         }\n  42 |     }, [isLoading, complete, x]);","line":39,"column":13,"nodeType":null,"endLine":39,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, useMotionValue, useTransform, animate } from \"framer-motion\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ChevronRight } from \"lucide-react\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\ninterface NeonSliderProps {\r\n    onConfirm: () => void;\r\n    isLoading?: boolean;\r\n    disabled?: boolean;\r\n    side: \"YES\" | \"NO\";\r\n}\r\n\r\nexport default function NeonSlider({ onConfirm, isLoading, disabled, side }: NeonSliderProps) {\r\n    const [complete, setComplete] = useState(false);\r\n    const x = useMotionValue(0);\r\n    const width = 280; // Slider width\r\n    const dragLimit = width - 50; // Max drag distance\r\n\r\n    const backgroundOpacity = useTransform(x, [0, dragLimit], [0.1, 1]);\r\n    const glowOpacity = useTransform(x, [0, dragLimit], [0, 0.8]);\r\n\r\n    const colorClass = side === \"YES\" ? \"bg-neon-green\" : \"bg-neon-coral\";\r\n    const shadowClass = side === \"YES\" ? \"shadow-[0_0_20px_#00FF94]\" : \"shadow-[0_0_20px_#FF2E63]\";\r\n    const textClass = side === \"YES\" ? \"text-neon-green\" : \"text-neon-coral\";\r\n\r\n    const handleDragEnd = () => {\r\n        if (x.get() > dragLimit - 20) {\r\n            setComplete(true);\r\n            onConfirm();\r\n        } else {\r\n            animate(x, 0, { type: \"spring\", stiffness: 300, damping: 20 });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isLoading && complete) {\r\n            setComplete(false);\r\n            x.set(0);\r\n        }\r\n    }, [isLoading, complete, x]);\r\n\r\n    return (\r\n        <div className={twMerge(\"relative w-full h-14 rounded-full bg-surface border border-white/10 overflow-hidden select-none\", disabled && \"opacity-50 cursor-not-allowed\")}>\r\n            {/* Background Fill */}\r\n            <motion.div\r\n                style={{ opacity: backgroundOpacity, width: x }}\r\n                className={twMerge(\"absolute inset-y-0 left-0 h-full\", colorClass, \"opacity-20\")}\r\n            />\r\n\r\n            {/* Glow Effect */}\r\n            <motion.div\r\n                style={{ opacity: glowOpacity }}\r\n                className={twMerge(\"absolute inset-y-0 left-0 w-full h-full blur-xl\", colorClass)}\r\n            />\r\n\r\n            {/* Text */}\r\n            <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none z-10\">\r\n                <span className={twMerge(\"font-heading font-bold tracking-widest text-sm\", textClass)}>\r\n                    {isLoading ? \"EXECUTING...\" : `SLIDE TO ${side}`}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Draggable Handle */}\r\n            <motion.div\r\n                drag={disabled || isLoading ? false : \"x\"}\r\n                dragConstraints={{ left: 0, right: dragLimit }}\r\n                dragElastic={0.1}\r\n                dragMomentum={false}\r\n                onDragEnd={handleDragEnd}\r\n                style={{ x }}\r\n                className={twMerge(\r\n                    \"absolute top-1 left-1 w-12 h-12 rounded-full cursor-grab active:cursor-grabbing flex items-center justify-center z-20 transition-colors\",\r\n                    colorClass,\r\n                    shadowClass,\r\n                    \"border border-white/20\"\r\n                )}\r\n            >\r\n                <ChevronRight className=\"text-void w-6 h-6\" strokeWidth={3} />\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\ResolutionPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useWaitForTransactionReceipt' is defined but never used.","line":5,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatUnits' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'parseUnits' is defined but never used.","line":6,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actionInProgress' is assigned a value but never used.","line":117,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'assertHash' is assigned a value but never used.","line":120,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'settleHash' is assigned a value but never used.","line":121,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":121,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'claimHash' is assigned a value but never used.","line":122,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":122,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useWallet } from '@/lib/use-wallet';\r\nimport { useWriteContract, useWaitForTransactionReceipt, useReadContract } from 'wagmi';\r\nimport { formatUnits, parseUnits } from 'viem';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Clock,\r\n    CheckCircle,\r\n    AlertTriangle,\r\n    Gavel,\r\n    Shield,\r\n    Gift,\r\n    Loader2,\r\n    ExternalLink\r\n} from 'lucide-react';\r\n\r\n// Contract addresses\r\nconst MARKET_CONTRACT = process.env.NEXT_PUBLIC_MARKET_ADDRESS as `0x${string}` || '0x0000000000000000000000000000000000000000';\r\n\r\n// Market status enum\r\nenum MarketStatus {\r\n    ACTIVE = 'ACTIVE',\r\n    ENDED = 'ENDED',\r\n    ASSERTING = 'ASSERTING',\r\n    DISPUTABLE = 'DISPUTABLE',\r\n    RESOLVED = 'RESOLVED',\r\n}\r\n\r\n// Simple ABI for UMA market functions\r\nconst MARKET_ABI = [\r\n    {\r\n        name: 'assertOutcome',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [\r\n            { name: 'marketId', type: 'uint256' },\r\n            { name: 'outcome', type: 'bool' }\r\n        ],\r\n        outputs: [],\r\n    },\r\n    {\r\n        name: 'settleMarket',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [{ name: 'marketId', type: 'uint256' }],\r\n        outputs: [],\r\n    },\r\n    {\r\n        name: 'claimWinnings',\r\n        type: 'function',\r\n        stateMutability: 'nonpayable',\r\n        inputs: [{ name: 'marketId', type: 'uint256' }],\r\n        outputs: [],\r\n    },\r\n    {\r\n        name: 'markets',\r\n        type: 'function',\r\n        stateMutability: 'view',\r\n        inputs: [{ name: '', type: 'uint256' }],\r\n        outputs: [\r\n            { name: 'question', type: 'string' },\r\n            { name: 'endTime', type: 'uint256' },\r\n            { name: 'yesShares', type: 'uint256' },\r\n            { name: 'noShares', type: 'uint256' },\r\n            { name: 'liquidityParam', type: 'uint256' },\r\n            { name: 'resolved', type: 'bool' },\r\n            { name: 'outcome', type: 'bool' },\r\n            { name: 'subsidyPool', type: 'uint256' },\r\n            { name: 'assertionId', type: 'bytes32' },\r\n            { name: 'assertionPending', type: 'bool' },\r\n            { name: 'asserter', type: 'address' },\r\n            { name: 'assertedOutcome', type: 'bool' },\r\n        ],\r\n    },\r\n    {\r\n        name: 'getUserPosition',\r\n        type: 'function',\r\n        stateMutability: 'view',\r\n        inputs: [\r\n            { name: 'marketId', type: 'uint256' },\r\n            { name: 'user', type: 'address' }\r\n        ],\r\n        outputs: [\r\n            { name: 'yesShares', type: 'uint256' },\r\n            { name: 'noShares', type: 'uint256' },\r\n            { name: 'claimed', type: 'bool' },\r\n        ],\r\n    },\r\n] as const;\r\n\r\ninterface ResolutionPanelProps {\r\n    marketId: number;\r\n    question: string;\r\n    endTime: number;\r\n    resolved: boolean;\r\n    outcome?: boolean;\r\n    assertionPending?: boolean;\r\n    assertedOutcome?: boolean;\r\n    asserter?: string;\r\n}\r\n\r\nexport function ResolutionPanel({\r\n    marketId,\r\n    question,\r\n    endTime,\r\n    resolved,\r\n    outcome,\r\n    assertionPending = false,\r\n    assertedOutcome,\r\n    asserter\r\n}: ResolutionPanelProps) {\r\n    const { isConnected, address } = useWallet();\r\n    const [status, setStatus] = useState<MarketStatus>(MarketStatus.ACTIVE);\r\n    const [timeRemaining, setTimeRemaining] = useState('');\r\n    const [actionInProgress, setActionInProgress] = useState<string | null>(null);\r\n\r\n    // Contract write hooks\r\n    const { writeContract: assertWrite, data: assertHash, isPending: assertPending } = useWriteContract();\r\n    const { writeContract: settleWrite, data: settleHash, isPending: settlePending } = useWriteContract();\r\n    const { writeContract: claimWrite, data: claimHash, isPending: claimPending } = useWriteContract();\r\n\r\n    // Read user position\r\n    const { data: position } = useReadContract({\r\n        address: MARKET_CONTRACT,\r\n        abi: MARKET_ABI,\r\n        functionName: 'getUserPosition',\r\n        args: address ? [BigInt(marketId), address] : undefined,\r\n        query: { enabled: !!address }\r\n    });\r\n\r\n    // Determine market status\r\n    useEffect(() => {\r\n        const now = Date.now() / 1000;\r\n\r\n        if (resolved) {\r\n            setStatus(MarketStatus.RESOLVED);\r\n        } else if (assertionPending) {\r\n            setStatus(MarketStatus.DISPUTABLE);\r\n        } else if (now >= endTime) {\r\n            setStatus(MarketStatus.ENDED);\r\n        } else {\r\n            setStatus(MarketStatus.ACTIVE);\r\n        }\r\n    }, [resolved, assertionPending, endTime]);\r\n\r\n    // Update time remaining\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            const now = Date.now() / 1000;\r\n            const diff = endTime - now;\r\n\r\n            if (diff <= 0) {\r\n                setTimeRemaining('Ended');\r\n            } else {\r\n                const days = Math.floor(diff / 86400);\r\n                const hours = Math.floor((diff % 86400) / 3600);\r\n                const mins = Math.floor((diff % 3600) / 60);\r\n\r\n                if (days > 0) {\r\n                    setTimeRemaining(`${days}d ${hours}h`);\r\n                } else if (hours > 0) {\r\n                    setTimeRemaining(`${hours}h ${mins}m`);\r\n                } else {\r\n                    setTimeRemaining(`${mins}m`);\r\n                }\r\n            }\r\n        }, 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [endTime]);\r\n\r\n    // Handle assert outcome\r\n    async function handleAssert(outcomeValue: boolean) {\r\n        if (!isConnected) return;\r\n        setActionInProgress('assert');\r\n\r\n        try {\r\n            assertWrite({\r\n                address: MARKET_CONTRACT,\r\n                abi: MARKET_ABI,\r\n                functionName: 'assertOutcome',\r\n                args: [BigInt(marketId), outcomeValue],\r\n            });\r\n        } catch (error) {\r\n            console.error('Assert failed:', error);\r\n            setActionInProgress(null);\r\n        }\r\n    }\r\n\r\n    // Handle settle\r\n    async function handleSettle() {\r\n        if (!isConnected) return;\r\n        setActionInProgress('settle');\r\n\r\n        try {\r\n            settleWrite({\r\n                address: MARKET_CONTRACT,\r\n                abi: MARKET_ABI,\r\n                functionName: 'settleMarket',\r\n                args: [BigInt(marketId)],\r\n            });\r\n        } catch (error) {\r\n            console.error('Settle failed:', error);\r\n            setActionInProgress(null);\r\n        }\r\n    }\r\n\r\n    // Handle claim\r\n    async function handleClaim() {\r\n        if (!isConnected) return;\r\n        setActionInProgress('claim');\r\n\r\n        try {\r\n            claimWrite({\r\n                address: MARKET_CONTRACT,\r\n                abi: MARKET_ABI,\r\n                functionName: 'claimWinnings',\r\n                args: [BigInt(marketId)],\r\n            });\r\n        } catch (error) {\r\n            console.error('Claim failed:', error);\r\n            setActionInProgress(null);\r\n        }\r\n    }\r\n\r\n    // Check if user can claim\r\n    const userYesShares = position ? Number(position[0]) : 0;\r\n    const userNoShares = position ? Number(position[1]) : 0;\r\n    const hasClaimed = position ? position[2] : false;\r\n    const hasWinningPosition = resolved && (\r\n        (outcome && userYesShares > 0) || (!outcome && userNoShares > 0)\r\n    );\r\n\r\n    return (\r\n        <div className=\"bg-surface/50 backdrop-blur-md border border-white/10 rounded-2xl p-6\">\r\n            {/* Status Header */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-lg font-bold text-white\">Resolution Status</h3>\r\n                <StatusBadge status={status} />\r\n            </div>\r\n\r\n            {/* Status-specific content */}\r\n            <AnimatePresence mode=\"wait\">\r\n                {/* ACTIVE - Market still running */}\r\n                {status === MarketStatus.ACTIVE && (\r\n                    <motion.div\r\n                        key=\"active\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"text-center py-4\"\r\n                    >\r\n                        <Clock className=\"w-12 h-12 text-white/30 mx-auto mb-3\" />\r\n                        <p className=\"text-white/60\">Market ends in</p>\r\n                        <p className=\"text-2xl font-mono font-bold text-white\">{timeRemaining}</p>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* ENDED - Ready for assertion */}\r\n                {status === MarketStatus.ENDED && (\r\n                    <motion.div\r\n                        key=\"ended\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"space-y-4\"\r\n                    >\r\n                        <div className=\"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 text-center\">\r\n                            <Gavel className=\"w-8 h-8 text-amber-400 mx-auto mb-2\" />\r\n                            <p className=\"text-amber-400 font-medium\">Market Ready for Resolution</p>\r\n                            <p className=\"text-white/50 text-sm mt-1\">\r\n                                Assert the outcome to begin resolution\r\n                            </p>\r\n                        </div>\r\n\r\n                        <p className=\"text-white/60 text-sm text-center mb-4\">{question}</p>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                            <button\r\n                                onClick={() => handleAssert(true)}\r\n                                disabled={!isConnected || assertPending}\r\n                                className=\"py-3 bg-green-500/20 border border-green-500/50 text-green-400 font-bold rounded-xl hover:bg-green-500/30 transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                            >\r\n                                {assertPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : null}\r\n                                Assert YES\r\n                            </button>\r\n                            <button\r\n                                onClick={() => handleAssert(false)}\r\n                                disabled={!isConnected || assertPending}\r\n                                className=\"py-3 bg-red-500/20 border border-red-500/50 text-red-400 font-bold rounded-xl hover:bg-red-500/30 transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                            >\r\n                                {assertPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : null}\r\n                                Assert NO\r\n                            </button>\r\n                        </div>\r\n\r\n                        <p className=\"text-white/40 text-xs text-center\">\r\n                            Requires bond deposit. 2-hour dispute window.\r\n                        </p>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* DISPUTABLE - Assertion made, can be disputed */}\r\n                {status === MarketStatus.DISPUTABLE && (\r\n                    <motion.div\r\n                        key=\"disputable\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"space-y-4\"\r\n                    >\r\n                        <div className=\"bg-primary/10 border border-primary/20 rounded-xl p-4\">\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <span className=\"text-white/60 text-sm\">Asserted Outcome:</span>\r\n                                <span className={`font-bold ${assertedOutcome ? 'text-green-400' : 'text-red-400'}`}>\r\n                                    {assertedOutcome ? 'âœ… YES' : 'âŒ NO'}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <span className=\"text-white/60 text-sm\">Asserted by:</span>\r\n                                <span className=\"text-primary font-mono text-sm\">\r\n                                    {asserter?.slice(0, 6)}...{asserter?.slice(-4)}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 text-center\">\r\n                            <Shield className=\"w-8 h-8 text-amber-400 mx-auto mb-2\" />\r\n                            <p className=\"text-amber-400 font-medium\">Dispute Window Open</p>\r\n                            <p className=\"text-white/50 text-sm mt-1\">\r\n                                ~2 hours for anyone to dispute this assertion\r\n                            </p>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={handleSettle}\r\n                            disabled={!isConnected || settlePending}\r\n                            className=\"w-full py-3 bg-primary text-black font-bold rounded-xl hover:bg-primary/80 transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {settlePending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : null}\r\n                            Settle Market (After Liveness)\r\n                        </button>\r\n\r\n                        <p className=\"text-white/40 text-xs text-center\">\r\n                            Settlement can be called after the 2-hour liveness period\r\n                        </p>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* RESOLVED - Market finalized */}\r\n                {status === MarketStatus.RESOLVED && (\r\n                    <motion.div\r\n                        key=\"resolved\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"space-y-4\"\r\n                    >\r\n                        <div className={`p-6 rounded-xl text-center ${outcome\r\n                                ? 'bg-green-500/20 border border-green-500/30'\r\n                                : 'bg-red-500/20 border border-red-500/30'\r\n                            }`}>\r\n                            <CheckCircle className={`w-12 h-12 mx-auto mb-2 ${outcome ? 'text-green-400' : 'text-red-400'\r\n                                }`} />\r\n                            <p className=\"text-white/60 text-sm\">Final Outcome</p>\r\n                            <p className={`text-3xl font-bold ${outcome ? 'text-green-400' : 'text-red-400'\r\n                                }`}>\r\n                                {outcome ? 'YES' : 'NO'}\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* User position info */}\r\n                        {(userYesShares > 0 || userNoShares > 0) && (\r\n                            <div className=\"bg-white/5 rounded-xl p-4\">\r\n                                <p className=\"text-white/60 text-sm mb-2\">Your Position</p>\r\n                                <div className=\"flex justify-between\">\r\n                                    {userYesShares > 0 && (\r\n                                        <span className=\"text-green-400\">\r\n                                            {userYesShares.toLocaleString()} YES shares\r\n                                        </span>\r\n                                    )}\r\n                                    {userNoShares > 0 && (\r\n                                        <span className=\"text-red-400\">\r\n                                            {userNoShares.toLocaleString()} NO shares\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Claim button */}\r\n                        {hasWinningPosition && !hasClaimed && (\r\n                            <button\r\n                                onClick={handleClaim}\r\n                                disabled={!isConnected || claimPending}\r\n                                className=\"w-full py-4 bg-primary text-black font-bold rounded-xl hover:bg-primary/80 transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                            >\r\n                                {claimPending ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <Gift className=\"w-5 h-5\" />}\r\n                                Claim Winnings\r\n                            </button>\r\n                        )}\r\n\r\n                        {hasClaimed && (\r\n                            <div className=\"text-center py-4\">\r\n                                <CheckCircle className=\"w-8 h-8 text-primary mx-auto mb-2\" />\r\n                                <p className=\"text-primary font-medium\">Winnings Claimed!</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        {!hasWinningPosition && (userYesShares > 0 || userNoShares > 0) && (\r\n                            <div className=\"text-center py-4\">\r\n                                <AlertTriangle className=\"w-8 h-8 text-white/30 mx-auto mb-2\" />\r\n                                <p className=\"text-white/50\">No winnings to claim</p>\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Not connected warning */}\r\n            {!isConnected && status !== MarketStatus.ACTIVE && (\r\n                <p className=\"text-amber-400/80 text-sm text-center mt-4\">\r\n                    Connect wallet to interact\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// Status badge component\r\nfunction StatusBadge({ status }: { status: MarketStatus }) {\r\n    const config = {\r\n        [MarketStatus.ACTIVE]: { color: 'bg-blue-500/20 text-blue-400 border-blue-500/50', label: 'Active' },\r\n        [MarketStatus.ENDED]: { color: 'bg-amber-500/20 text-amber-400 border-amber-500/50', label: 'Awaiting Resolution' },\r\n        [MarketStatus.ASSERTING]: { color: 'bg-purple-500/20 text-purple-400 border-purple-500/50', label: 'Asserting' },\r\n        [MarketStatus.DISPUTABLE]: { color: 'bg-orange-500/20 text-orange-400 border-orange-500/50', label: 'Dispute Window' },\r\n        [MarketStatus.RESOLVED]: { color: 'bg-green-500/20 text-green-400 border-green-500/50', label: 'Resolved' },\r\n    };\r\n\r\n    const { color, label } = config[status];\r\n\r\n    return (\r\n        <span className={`px-3 py-1 rounded-full text-xs font-medium border ${color}`}>\r\n            {label}\r\n        </span>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\SkeletonLoader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\SlideToConfirm.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has an unnecessary dependency: 'containerRef.current'. Either exclude it or remove the dependency array. Mutable values like 'containerRef.current' aren't valid dependencies because mutating them doesn't re-render the component.","line":29,"column":8,"nodeType":"ArrayExpression","endLine":29,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[1056,1078],"text":"[]"}}]},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\SlideToConfirm.tsx:29:9\n  27 |             setConstraints(containerRef.current.offsetWidth - 52); // 48px handle + 4px margin\n  28 |         }\n> 29 |     }, [containerRef.current]);\n     |         ^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  30 |\n  31 |     // Transform opacity/color based on drag position\n  32 |     const checkOffset = constraints * 0.9;","line":29,"column":9,"nodeType":null,"endLine":29,"endColumn":29},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\SlideToConfirm.tsx:29:9\n  27 |             setConstraints(containerRef.current.offsetWidth - 52); // 48px handle + 4px margin\n  28 |         }\n> 29 |     }, [containerRef.current]);\n     |         ^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  30 |\n  31 |     // Transform opacity/color based on drag position\n  32 |     const checkOffset = constraints * 0.9;","line":29,"column":9,"nodeType":null,"endLine":29,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, useMotionValue, useTransform, useAnimation } from \"framer-motion\";\r\nimport { ChevronRight, ChevronsRight, Loader2 } from \"lucide-react\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\ninterface SlideToConfirmProps {\r\n    onConfirm: () => void;\r\n    isLoading: boolean;\r\n    disabled: boolean;\r\n    text: string;\r\n    side: 'YES' | 'NO';\r\n}\r\n\r\nexport function SlideToConfirm({ onConfirm, isLoading, disabled, text, side }: SlideToConfirmProps) {\r\n    const [complete, setComplete] = useState(false);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const [constraints, setConstraints] = useState(0);\r\n\r\n    const x = useMotionValue(0);\r\n    const controls = useAnimation();\r\n\r\n    // Calculate drag constraints based on container width\r\n    useEffect(() => {\r\n        if (containerRef.current) {\r\n            // Width of container - width of handle (change handle width here if needed)\r\n            setConstraints(containerRef.current.offsetWidth - 52); // 48px handle + 4px margin\r\n        }\r\n    }, [containerRef.current]);\r\n\r\n    // Transform opacity/color based on drag position\r\n    const checkOffset = constraints * 0.9;\r\n    const backgroundOpacity = useTransform(x, [0, constraints], [0, 1]);\r\n    const textOpacity = useTransform(x, [0, constraints * 0.5], [1, 0]);\r\n    const shimmerOpacity = useTransform(x, [0, constraints], [1, 0]);\r\n\r\n    async function handleDragEnd() {\r\n        if (x.get() > checkOffset) {\r\n            setComplete(true);\r\n            onConfirm();\r\n        } else {\r\n            controls.start({ x: 0, transition: { type: \"spring\", stiffness: 400, damping: 30 } });\r\n        }\r\n    }\r\n\r\n    // Reset slider if loading finishes or component resets\r\n    useEffect(() => {\r\n        if (!isLoading && complete) {\r\n            setComplete(false);\r\n            controls.start({ x: 0 });\r\n        }\r\n    }, [isLoading, complete, controls]);\r\n\r\n    const colorClass = side === 'YES' ? 'bg-success' : 'bg-danger';\r\n    const glowClass = side === 'YES' ? 'shadow-[0_0_20px_rgba(0,255,148,0.4)]' : 'shadow-[0_0_20px_rgba(255,68,68,0.4)]';\r\n    const textColorClass = side === 'YES' ? 'text-success' : 'text-danger';\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className={`\r\n                relative w-full h-12 rounded-full overflow-hidden \r\n                bg-black/40 backdrop-blur-md border border-white/10 \r\n                select-none shadow-inner transition-all duration-300\r\n                ${disabled ? 'opacity-50 cursor-not-allowed' : 'hover:border-white/20'}\r\n            `}\r\n        >\r\n            {/* Background Fill Animation */}\r\n            <motion.div\r\n                style={{ opacity: backgroundOpacity }}\r\n                className={`absolute inset-0 ${colorClass}/20 transition-colors`}\r\n            />\r\n\r\n            {/* Shimmer Effect on Track */}\r\n            <motion.div\r\n                style={{ opacity: shimmerOpacity }}\r\n                className=\"absolute inset-0\"\r\n            >\r\n                <div className=\"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent\" />\r\n            </motion.div>\r\n\r\n            {/* Text Label */}\r\n            <motion.div\r\n                style={{ opacity: textOpacity }}\r\n                className=\"absolute inset-0 flex items-center justify-center pointer-events-none\"\r\n            >\r\n                <span className={`text-[10px] font-bold tracking-[0.2em] font-mono ${textColorClass} drop-shadow-sm`}>\r\n                    {isLoading ? 'PROCESSING...' : text}\r\n                </span>\r\n                <ChevronsRight size={14} className={`ml-2 ${textColorClass} animate-pulse`} />\r\n            </motion.div>\r\n\r\n            {/* Draggable Handle */}\r\n            <motion.div\r\n                drag={disabled || isLoading ? false : \"x\"}\r\n                dragConstraints={{ left: 0, right: constraints }}\r\n                dragElastic={0.05}\r\n                dragMomentum={false}\r\n                onDragEnd={handleDragEnd}\r\n                animate={controls}\r\n                style={{ x }}\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                className={`\r\n                    absolute top-1 bottom-1 left-1 \r\n                    w-12 rounded-full \r\n                    ${colorClass} ${glowClass}\r\n                    flex items-center justify-center \r\n                    cursor-grab active:cursor-grabbing \r\n                    z-10 transition-shadow\r\n                `}\r\n            >\r\n                {isLoading ? (\r\n                    <Loader2 className=\"w-5 h-5 text-black animate-spin\" />\r\n                ) : (\r\n                    <ChevronRight className=\"text-black\" size={20} strokeWidth={3} />\r\n                )}\r\n            </motion.div>\r\n\r\n            {/* Success State Overlay */}\r\n            {complete && (\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    className={`absolute inset-0 flex items-center justify-center font-bold text-xs tracking-widest text-black ${colorClass} z-20`}\r\n                >\r\n                    CONFIRMED\r\n                </motion.div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\SuccessModal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\SuccessModal.tsx:23:13\n  21 |     useEffect(() => {\n  22 |         if (isOpen) {\n> 23 |             setVisible(true);\n     |             ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  24 |         } else {\n  25 |             setTimeout(() => setVisible(false), 300);\n  26 |         }","line":23,"column":13,"nodeType":null,"endLine":23,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { X, Check, ExternalLink } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface SuccessModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    data: {\r\n        marketId: number;\r\n        side: string;\r\n        shares: number;\r\n        cost: string;\r\n        newPrice: number;\r\n        hash: string;\r\n        question?: string;\r\n    };\r\n}\r\n\r\nexport function SuccessModal({ isOpen, onClose, data }: SuccessModalProps) {\r\n    const [visible, setVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setVisible(true);\r\n        } else {\r\n            setTimeout(() => setVisible(false), 300);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        <div className={`fixed inset-0 z-50 flex items-center justify-center p-4 transition-opacity duration-300 ${isOpen ? \"opacity-100\" : \"opacity-0\"}`}>\r\n            {/* Backdrop */}\r\n            <div\r\n                className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n                onClick={onClose}\r\n            />\r\n\r\n            {/* Modal Content */}\r\n            <div className={`relative bg-[#0A0A0C] border border-success/30 rounded-2xl p-6 w-full max-w-md shadow-[0_0_50px_rgba(0,255,148,0.1)] transform transition-transform duration-300 ${isOpen ? \"scale-100 translate-y-0\" : \"scale-95 translate-y-4\"}`}>\r\n\r\n                {/* Close Button */}\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"absolute top-4 right-4 text-white/40 hover:text-white transition-colors\"\r\n                >\r\n                    <X size={20} />\r\n                </button>\r\n\r\n                {/* Success Icon */}\r\n                <div className=\"flex justify-center mb-6\">\r\n                    <div className=\"w-16 h-16 rounded-full bg-success/10 flex items-center justify-center ring-1 ring-success/50 shadow-[0_0_20px_rgba(0,255,148,0.2)]\">\r\n                        <Check size={32} className=\"text-success\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"text-center mb-8\">\r\n                    <h2 className=\"text-2xl font-bold text-white mb-2\">Bet Placed!</h2>\r\n                    <p className=\"text-white/60 text-sm\">Your transaction was successfully executed.</p>\r\n                </div>\r\n\r\n                {/* Details Grid */}\r\n                <div className=\"space-y-4 mb-8\">\r\n                    <div className=\"flex justify-between items-center p-3 bg-white/5 rounded-lg border border-white/5\">\r\n                        <span className=\"text-white/40 text-sm\">Side</span>\r\n                        <span className={`font-bold font-mono ${data.side === 'YES' ? 'text-success' : 'text-danger'}`}>\r\n                            {data.side}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-between items-center p-3 bg-white/5 rounded-lg border border-white/5\">\r\n                        <span className=\"text-white/40 text-sm\">Shares</span>\r\n                        <span className=\"text-white font-mono\">{data.shares}</span>\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-between items-center p-3 bg-white/5 rounded-lg border border-white/5\">\r\n                        <span className=\"text-white/40 text-sm\">Total Cost</span>\r\n                        <span className=\"text-white font-mono\">${data.cost} USDC</span>\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-between items-center p-3 bg-white/5 rounded-lg border border-white/5\">\r\n                        <span className=\"text-white/40 text-sm\">New Price</span>\r\n                        <span className=\"text-primary font-mono\">{data.newPrice}%</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Transaction Hash */}\r\n                <div className=\"text-center mb-6\">\r\n                    <a\r\n                        href={`https://sepolia.basescan.org/tx/${data.hash}`}\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                        className=\"inline-flex items-center gap-2 text-xs text-white/30 hover:text-white transition-colors\"\r\n                    >\r\n                        View Transaction <ExternalLink size={10} />\r\n                    </a>\r\n                </div>\r\n\r\n                {/* Action Button */}\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"w-full bg-white text-black font-bold py-3 rounded-xl hover:bg-gray-200 transition-colors\"\r\n                >\r\n                    Done\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\components\\ui\\WalletConnectButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\lib\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1067,1070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1067,1070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000/api';\r\n\r\ntype ApiOptions = RequestInit & {\r\n    token?: string;\r\n};\r\n\r\nexport async function apiRequest<T>(endpoint: string, options: ApiOptions = {}): Promise<T> {\r\n    const { token, headers, ...customConfig } = options;\r\n\r\n    const config: RequestInit = {\r\n        ...customConfig,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n            ...headers,\r\n        },\r\n    };\r\n\r\n    const response = await fetch(`${API_URL}${endpoint}`, config);\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n        throw new Error(data.error || 'Something went wrong');\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport const authApi = {\r\n    verify: (token: string) => apiRequest<{ success: boolean; token: string }>('/auth/verify', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ token }),\r\n    }),\r\n};\r\n\r\nexport const walletApi = {\r\n    get: (userId: string, token: string) => apiRequest<any>(`/wallet/${userId}`, { token }),\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\lib\\contracts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\lib\\use-wallet.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[432,435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[432,435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useAccount, useBalance, useReadContract } from 'wagmi';\r\nimport { formatUnits } from 'viem';\r\nimport { bsc, bscTestnet } from 'wagmi/chains';\r\nimport { getContracts } from './contracts';\r\n\r\n// Platform token address on BNB Chain\r\nconst PLATFORM_TOKEN_ADDRESS = '0x61Fc93c7C070B32B1b1479B86056d8Ec1D7125BD' as `0x${string}`;\r\n\r\n// Get USDC address from contracts config\r\nconst contracts = getContracts() as any;\r\nconst USDC_ADDRESS = (contracts.mockUSDC || '0x0eAD2Cc3B5eC12B69140410A1F4Dc8611994E6Be') as `0x${string}`;\r\n\r\n// Admin threshold: 50 million tokens (with 18 decimals)\r\nconst ADMIN_THRESHOLD = BigInt(50_000_000) * BigInt(10 ** 18);\r\n\r\n// ERC20 ABI for balance check\r\nconst ERC20_ABI = [\r\n    {\r\n        name: 'balanceOf',\r\n        type: 'function',\r\n        stateMutability: 'view',\r\n        inputs: [{ name: 'account', type: 'address' }],\r\n        outputs: [{ name: '', type: 'uint256' }],\r\n    },\r\n    {\r\n        name: 'decimals',\r\n        type: 'function',\r\n        stateMutability: 'view',\r\n        inputs: [],\r\n        outputs: [{ name: '', type: 'uint8' }],\r\n    },\r\n] as const;\r\n\r\nexport function useWallet() {\r\n    const { address, isConnected, isReconnecting, isConnecting, chain } = useAccount();\r\n\r\n    // Get native BNB balance\r\n    const { data: bnbBalance } = useBalance({\r\n        address,\r\n    });\r\n\r\n    // Get platform token balance\r\n    const { data: tokenBalance } = useReadContract({\r\n        address: PLATFORM_TOKEN_ADDRESS,\r\n        abi: ERC20_ABI,\r\n        functionName: 'balanceOf',\r\n        args: address ? [address] : undefined,\r\n        query: {\r\n            enabled: !!address && PLATFORM_TOKEN_ADDRESS !== '0x0000000000000000000000000000000000000000',\r\n        }\r\n    });\r\n\r\n    // Get USDC balance\r\n    const { data: usdcBalance } = useReadContract({\r\n        address: USDC_ADDRESS,\r\n        abi: ERC20_ABI,\r\n        functionName: 'balanceOf',\r\n        args: address ? [address] : undefined,\r\n        query: {\r\n            enabled: !!address,\r\n        }\r\n    });\r\n\r\n    // Check if user is admin (has >= 50M tokens)\r\n    const isAdmin = tokenBalance ? tokenBalance >= ADMIN_THRESHOLD : false;\r\n\r\n    // Format balances for display\r\n    const formattedBnbBalance = bnbBalance\r\n        ? parseFloat(formatUnits(bnbBalance.value, bnbBalance.decimals)).toFixed(4)\r\n        : '0';\r\n\r\n    const formattedTokenBalance = tokenBalance\r\n        ? parseFloat(formatUnits(tokenBalance, 18)).toLocaleString()\r\n        : '0';\r\n\r\n    // USDC has 6 decimals\r\n    const formattedUsdcBalance = usdcBalance\r\n        ? parseFloat(formatUnits(usdcBalance, 6)).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n        : '0.00';\r\n\r\n    return {\r\n        address,\r\n        isConnected,\r\n        isReconnecting,\r\n        isConnecting,\r\n        chain,\r\n        isMainnet: chain?.id === bsc.id,\r\n        isTestnet: chain?.id === bscTestnet.id,\r\n        bnbBalance: formattedBnbBalance,\r\n        tokenBalance: formattedTokenBalance,\r\n        rawTokenBalance: tokenBalance,\r\n        usdcBalance: formattedUsdcBalance,\r\n        rawUsdcBalance: usdcBalance,\r\n        isAdmin,\r\n    };\r\n}\r\n\r\n// Export chain info for reference\r\nexport { bsc, bscTestnet };\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\lib\\web3-provider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cookieStorage' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { createWeb3Modal } from '@web3modal/wagmi/react';\r\nimport { defaultWagmiConfig } from '@web3modal/wagmi/react/config';\r\nimport { WagmiProvider, cookieStorage, createStorage } from 'wagmi';\r\nimport { bsc, bscTestnet } from 'wagmi/chains';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ReactNode } from 'react';\r\n\r\n// WalletConnect Project ID\r\nconst projectId = '70415295a4738286445072f5c2392457';\r\n\r\n// Metadata\r\nconst metadata = {\r\n    name: 'OPOLL',\r\n    description: 'Decentralized Prediction Market',\r\n    url: 'https://opoll.app',\r\n    icons: ['https://opoll.app/logo.png']\r\n};\r\n\r\n// Configure chains (BNB Mainnet and Testnet)\r\nconst chains = [bsc, bscTestnet] as const;\r\n\r\n// Create wagmi config\r\nconst config = defaultWagmiConfig({\r\n    chains,\r\n    projectId,\r\n    metadata,\r\n    ssr: false, // Disable SSR to rely on client-side localStorage\r\n    storage: createStorage({\r\n        storage: typeof window !== 'undefined' ? window.localStorage : undefined\r\n    }),\r\n});\r\n\r\n// Create query client\r\nconst queryClient = new QueryClient();\r\n\r\n// Initialize Web3Modal\r\ncreateWeb3Modal({\r\n    wagmiConfig: config,\r\n    projectId,\r\n    enableAnalytics: false,\r\n    enableOnramp: false,\r\n    themeMode: 'dark',\r\n    themeVariables: {\r\n        '--w3m-accent': '#00FF94',\r\n        '--w3m-border-radius-master': '8px',\r\n    }\r\n});\r\n\r\ninterface Web3ProviderProps {\r\n    children: ReactNode;\r\n}\r\n\r\nexport function Web3Provider({ children }: Web3ProviderProps) {\r\n    return (\r\n        <WagmiProvider config={config}>\r\n            <QueryClientProvider client={queryClient}>\r\n                {children}\r\n            </QueryClientProvider>\r\n        </WagmiProvider>\r\n    );\r\n}\r\n\r\nexport { config };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\lib\\web3.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1619,1622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1619,1622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ethers } from 'ethers';\r\nimport { getContracts, getCurrentNetwork } from './contracts';\r\n\r\n// ABI for PredictionMarketLMSR contract (with Deposit System)\r\nconst PREDICTION_MARKET_LMSR_ABI = [\r\n    'function marketCount() view returns (uint256)',\r\n    'function markets(uint256) view returns (string question, uint256 endTime, uint256 yesShares, uint256 noShares, uint256 liquidityParam, bool resolved, bool outcome, uint256 subsidyPool)',\r\n    'function getPrice(uint256 marketId) view returns (uint256)',\r\n    'function calculateCost(uint256 marketId, bool isYes, uint256 shares) view returns (uint256)',\r\n    'function buyShares(uint256 marketId, bool isYes, uint256 shares, uint256 maxCost)',\r\n    'function getUserPosition(uint256 marketId, address user) view returns (uint256 yesShares, uint256 noShares, bool claimed)',\r\n    'function claimWinnings(uint256 marketId)',\r\n    'function userBalances(address) view returns (uint256)',\r\n    'function deposit(uint256 amount)',\r\n    'function withdraw(uint256 amount)',\r\n];\r\n\r\nconst USDC_ABI = [\r\n    'function balanceOf(address) view returns (uint256)',\r\n    'function approve(address spender, uint256 amount) returns (bool)',\r\n    'function allowance(address owner, address spender) view returns (uint256)',\r\n];\r\n\r\nexport class Web3Service {\r\n    private provider: ethers.JsonRpcProvider;\r\n    private predictionMarket: ethers.Contract;\r\n    private usdc: ethers.Contract;\r\n\r\n    constructor() {\r\n        const network = getCurrentNetwork();\r\n        this.provider = new ethers.JsonRpcProvider(network.rpcUrl);\r\n\r\n        const contracts = getContracts() as any; // Type assertion for flexibility\r\n\r\n        // Use LMSR contract if available, fallback to old AMM\r\n        const marketAddress = contracts.predictionMarketLMSR || contracts.predictionMarket;\r\n        this.predictionMarket = new ethers.Contract(\r\n            marketAddress,\r\n            PREDICTION_MARKET_LMSR_ABI,\r\n            this.provider\r\n        );\r\n\r\n        const usdcAddress = contracts.mockUSDC || contracts.usdc;\r\n        this.usdc = new ethers.Contract(\r\n            usdcAddress,\r\n            USDC_ABI,\r\n            this.provider\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Get all markets\r\n     */\r\n    /**\r\n     * Get all markets\r\n     */\r\n    async getMarkets() {\r\n        try {\r\n            const count = Number(await this.predictionMarket.marketCount());\r\n            const ids = Array.from({ length: count }, (_, i) => i);\r\n\r\n            // Fetch all data in parallel\r\n            const [marketsData, pricesData] = await Promise.all([\r\n                Promise.all(ids.map(id => this.predictionMarket.markets(id))),\r\n                Promise.all(ids.map(id => this.predictionMarket.getPrice(id)))\r\n            ]);\r\n\r\n            return ids.map((id, index) => {\r\n                const market = marketsData[index];\r\n                const price = pricesData[index];\r\n                const yesOdds = Number(price) / 100;\r\n\r\n                return {\r\n                    id: id,\r\n                    question: market.question,\r\n                    endTime: Number(market.endTime),\r\n                    yesShares: ethers.formatUnits(market.yesShares, 6),\r\n                    noShares: ethers.formatUnits(market.noShares, 6),\r\n                    yesPool: ethers.formatUnits(market.yesShares, 6),\r\n                    noPool: ethers.formatUnits(market.noShares, 6),\r\n                    totalVolume: (parseFloat(ethers.formatUnits(market.yesShares, 6)) + parseFloat(ethers.formatUnits(market.noShares, 6))).toFixed(2),\r\n                    resolved: market.resolved,\r\n                    outcome: market.outcome,\r\n                    yesOdds: yesOdds,\r\n                    noOdds: 100 - yesOdds,\r\n                };\r\n            });\r\n        } catch (error) {\r\n            console.error('Error fetching markets:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get single market\r\n     */\r\n    async getMarket(marketId: number) {\r\n        try {\r\n            const market = await this.predictionMarket.markets(marketId);\r\n            const price = await this.predictionMarket.getPrice(marketId);\r\n\r\n            const yesOdds = Number(price) / 100;\r\n\r\n            return {\r\n                id: marketId,\r\n                question: market.question,\r\n                endTime: Number(market.endTime),\r\n                yesShares: ethers.formatUnits(market.yesShares, 6),\r\n                noShares: ethers.formatUnits(market.noShares, 6),\r\n                yesPool: ethers.formatUnits(market.yesShares, 6), // For compatibility\r\n                noPool: ethers.formatUnits(market.noShares, 6),\r\n                totalVolume: (parseFloat(ethers.formatUnits(market.yesShares, 6)) + parseFloat(ethers.formatUnits(market.noShares, 6))).toFixed(2),\r\n                resolved: market.resolved,\r\n                outcome: market.outcome,\r\n                yesOdds: yesOdds,\r\n                noOdds: 100 - yesOdds,\r\n            };\r\n        } catch (error) {\r\n            console.error('Error fetching market:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calculate cost to buy shares (LMSR)\r\n     */\r\n    async calculateCost(marketId: number, isYes: boolean, shares: number) {\r\n        try {\r\n            const sharesInUnits = ethers.parseUnits(shares.toString(), 6);\r\n            const cost = await this.predictionMarket.calculateCost(marketId, isYes, sharesInUnits);\r\n            return ethers.formatUnits(cost, 6);\r\n        } catch (error) {\r\n            console.error('Error calculating cost:', error);\r\n            return '0';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get user position\r\n     */\r\n    async getUserPosition(marketId: number, userAddress: string) {\r\n        try {\r\n            const position = await this.predictionMarket.getUserPosition(marketId, userAddress);\r\n\r\n            return {\r\n                yesShares: ethers.formatUnits(position.yesShares, 6),\r\n                noShares: ethers.formatUnits(position.noShares, 6),\r\n                claimed: position.claimed,\r\n            };\r\n        } catch (error) {\r\n            console.error('Error fetching position:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get USDC balance (wallet balance)\r\n     */\r\n    async getUSDCBalance(address: string) {\r\n        try {\r\n            const balance = await this.usdc.balanceOf(address);\r\n            return ethers.formatUnits(balance, 6);\r\n        } catch (error) {\r\n            console.error('Error fetching USDC balance:', error);\r\n            return '0';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get deposited balance in the prediction market contract (Polymarket-style)\r\n     */\r\n    async getDepositedBalance(address: string) {\r\n        try {\r\n            const balance = await this.predictionMarket.userBalances(address);\r\n            return ethers.formatUnits(balance, 6);\r\n        } catch (error) {\r\n            console.error('Error fetching deposited balance:', error);\r\n            return '0';\r\n        }\r\n    }\r\n}\r\n\r\nexport const web3Service = new Web3Service();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\toluk\\Documents\\predict\\client\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]